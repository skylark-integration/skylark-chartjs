/**
 * skylark-chartjs - A version of chartjs that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.2
 * @link https://github.com/skylarkui/skylark-chartjs/
 * @license MIT
 */
define(["../core/core.datasetController","../core/core.defaults","../elements/index","../helpers/index"],function(e,t,a,r){"use strict";var o={},n={exports:{}},d=e,i=t,l=a,s=r,u=s.options.resolve;function c(e){return"object"!=typeof e||Array.isArray(e)||!function(e){var t;for(t in e)return!1;return!0}(e)}return i._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var a=e.data,r=a.datasets,o=a.labels;if(r.length)for(var n=0;n<r[0].data.length;++n)t.push('<li><span style="background-color:'+r[0].backgroundColor[n]+'"></span>'),o[n]&&t.push(o[n]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(a,r){var o=e.getDatasetMeta(0),n=t.datasets[0],d=o.data[r].custom||{},i=e.options.elements.arc;return{text:a,fillStyle:u([d.backgroundColor,n.backgroundColor,i.backgroundColor],void 0,r),strokeStyle:u([d.borderColor,n.borderColor,i.borderColor],void 0,r),lineWidth:u([d.borderWidth,n.borderWidth,i.borderWidth],void 0,r),hidden:isNaN(n.data[r])||o.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var a,r,o,n=t.index,d=this.chart;for(a=0,r=(d.data.datasets||[]).length;a<r;++a)(o=d.getDatasetMeta(a)).data[n].hidden=!o.data[n].hidden;d.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}}),n.exports=d.extend({dataElementType:l.Arc,linkScales:s.noop,update:function(e){var t,a,r,o=this,n=o.getDataset(),d=o.getMeta(),i=o.chart.options.startAngle||0,l=o._starts=[],s=o._angles=[],u=d.data;for(o._updateRadius(),d.count=o.countVisibleElements(),t=0,a=n.data.length;t<a;t++)l[t]=i,r=o._computeAngle(t),s[t]=r,i+=r;for(t=0,a=u.length;t<a;++t)u[t]._options=o._resolveElementOptions(u[t],t),o.updateElement(u[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,a=t.chartArea,r=t.options,o=Math.min(a.right-a.left,a.bottom-a.top);t.outerRadius=Math.max(o/2,0),t.innerRadius=Math.max(r.cutoutPercentage?t.outerRadius/100*r.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,a){var r=this,o=r.chart,n=r.getDataset(),d=o.options,i=d.animation,l=o.scale,u=o.data.labels,c=l.xCenter,h=l.yCenter,g=d.startAngle,b=e.hidden?0:l.getDistanceFromCenterForValue(n.data[t]),p=r._starts[t],v=p+(e.hidden?0:r._angles[t]),C=i.animateScale?0:l.getDistanceFromCenterForValue(n.data[t]),f=e._options||{};s.extend(e,{_datasetIndex:r.index,_index:t,_scale:l,_model:{backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,borderAlign:f.borderAlign,x:c,y:h,innerRadius:0,outerRadius:a?C:b,startAngle:a&&i.animateRotate?g:p,endAngle:a&&i.animateRotate?g:v,label:s.valueAtIndexOrDefault(u,t,u[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),a=0;return s.each(t.data,function(t,r){isNaN(e.data[r])||t.hidden||a++}),a},setHoverStyle:function(e){var t=e._model,a=e._options,r=s.getHoverColor,o=s.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=o(a.hoverBackgroundColor,r(a.backgroundColor)),t.borderColor=o(a.hoverBorderColor,r(a.borderColor)),t.borderWidth=o(a.hoverBorderWidth,a.borderWidth)},_resolveElementOptions:function(e,t){var a,r,o,n=this.chart,d=this.getDataset(),i=e.custom||{},l=n.options.elements.arc,s={},c={chart:n,dataIndex:t,dataset:d,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(a=0,r=h.length;a<r;++a)s[o=h[a]]=u([i[o],d[o],l[o]],c,t);return s},_computeAngle:function(e){var t=this,a=this.getMeta().count,r=t.getDataset(),o=t.getMeta();if(isNaN(r.data[e])||o.data[e].hidden)return 0;var n={chart:t.chart,dataIndex:e,dataset:r,datasetIndex:t.index};return u([t.chart.options.elements.arc.angle,2*Math.PI/a],n,e)}}),c(n.exports)?n.exports:c(o)?o:void 0});
//# sourceMappingURL=../sourcemaps/controllers/controller.polarArea.js.map
