/**
 * skylark-chartjs - A version of chartjs that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.2
 * @link https://github.com/skylarkui/skylark-chartjs/
 * @license MIT
 */
define(["../core/core.defaults","../elements/index","../helpers/index"],function(e,t,r){"use strict";var n={},i={exports:{}},l=e,a=t,o=r;l._set("global",{plugins:{filler:{propagate:!0}}});var s={dataset:function(e){var t=e.fill,r=e.chart,n=r.getDatasetMeta(t),i=n&&r.isDatasetVisible(t)&&n.dataset._children||[],l=i.length||0;return l?function(e,t){return t<l&&i[t]._view||null}:null},boundary:function(e){var t=e.boundary,r=t?t.x:null,n=t?t.y:null;return function(e){return{x:null===r?e.x:r,y:null===n?e.y:n}}}};function u(e,t,r){var n,i=e._model||{},l=i.fill;if(void 0===l&&(l=!!i.backgroundColor),!1===l||null===l)return!1;if(!0===l)return"origin";if(n=parseFloat(l,10),isFinite(n)&&Math.floor(n)===n)return"-"!==l[0]&&"+"!==l[0]||(n=t+n),!(n===t||n<0||n>=r)&&n;switch(l){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return l;default:return!1}}function f(e){var t,r=e.el._model||{},n=e.el._scale||{},i=e.fill,l=null;if(isFinite(i))return null;if("start"===i?l=void 0===r.scaleBottom?n.bottom:r.scaleBottom:"end"===i?l=void 0===r.scaleTop?n.top:r.scaleTop:void 0!==r.scaleZero?l=r.scaleZero:n.getBasePosition?l=n.getBasePosition():n.getBasePixel&&(l=n.getBasePixel()),void 0!==l&&null!==l){if(void 0!==l.x&&void 0!==l.y)return l;if(o.isFinite(l))return{x:(t=n.isHorizontal())?l:null,y:t?null:l}}return null}function c(e,t,r){var n,i=e[t].fill,l=[t];if(!r)return i;for(;!1!==i&&-1===l.indexOf(i);){if(!isFinite(i))return i;if(!(n=e[i]))return!1;if(n.visible)return i;l.push(i),i=n.fill}return!1}function d(e){var t=e.fill,r="dataset";return!1===t?null:(isFinite(t)||(r="boundary"),s[r](e))}function p(e){return e&&!e.skip}function v(e,t,r,n,i){var l;if(n&&i){for(e.moveTo(t[0].x,t[0].y),l=1;l<n;++l)o.canvas.lineTo(e,t[l-1],t[l]);for(e.lineTo(r[i-1].x,r[i-1].y),l=i-1;l>0;--l)o.canvas.lineTo(e,r[l],r[l-1],!0)}}function g(e){return"object"!=typeof e||Array.isArray(e)||!function(e){var t;for(t in e)return!1;return!0}(e)}return i.exports={id:"filler",afterDatasetsUpdate:function(e,t){var r,n,i,l,o=(e.data.datasets||[]).length,s=t.propagate,p=[];for(n=0;n<o;++n)l=null,(i=(r=e.getDatasetMeta(n)).dataset)&&i._model&&i instanceof a.Line&&(l={visible:e.isDatasetVisible(n),fill:u(i,n,o),chart:e,el:i}),r.$filler=l,p.push(l);for(n=0;n<o;++n)(l=p[n])&&(l.fill=c(p,n,s),l.boundary=f(l),l.mapper=d(l))},beforeDatasetDraw:function(e,t){var r=t.meta.$filler;if(r){var n=e.ctx,i=r.el,a=i._view,s=i._children||[],u=r.mapper,f=a.backgroundColor||l.global.defaultColor;u&&f&&s.length&&(o.canvas.clipArea(n,e.chartArea),function(e,t,r,n,i,l){var a,o,s,u,f,c,d,g=t.length,h=n.spanGaps,b=[],x=[],y=0,m=0;for(e.beginPath(),a=0,o=g+!!l;a<o;++a)f=r(u=t[s=a%g]._view,s,n),c=p(u),d=p(f),c&&d?(y=b.push(u),m=x.push(f)):y&&m&&(h?(c&&b.push(u),d&&x.push(f)):(v(e,b,x,y,m),y=m=0,b=[],x=[]));v(e,b,x,y,m),e.closePath(),e.fillStyle=i,e.fill()}(n,s,u,a,f,i._loop),o.canvas.unclipArea(n))}}},g(i.exports)?i.exports:g(n)?n:void 0});
//# sourceMappingURL=../sourcemaps/plugins/plugin.filler.js.map
