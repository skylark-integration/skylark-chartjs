{"version":3,"sources":["packages/chartjs-color.js"],"names":["define","convert","string","Color","obj","this","valid","values","rgb","hsl","hsv","hwb","cmyk","alpha","vals","getRgba","setValues","getHsla","getHwb","undefined","r","red","l","lightness","v","value","w","whiteness","c","cyan","prototype","isValid","setSpace","arguments","rgbArray","hslArray","hsvArray","hwbArray","concat","cmykArray","rgbaArray","hslaArray","val","setChannel","green","blue","hue","saturation","saturationv","blackness","magenta","yellow","black","hexString","rgbString","rgbaString","percentString","hslString","hslaString","hwbString","keyword","rgbNumber","luminosity","lum","i","length","chan","Math","pow","contrast","color2","lum1","lum2","level","contrastRatio","dark","light","negate","lighten","ratio","darken","saturate","desaturate","whiten","blacken","greyscale","clearer","opaquer","rotate","degrees","mix","mixinColor","weight","p","a","w1","w2","toJSON","clone","type","result","source","target","prop","hasOwnProperty","toString","call","slice","console","error","spaces","maxes","getValues","space","charAt","capped","chans","max","min","round","sname","args","Array","index","svalues"],"mappings":"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","file":"../../packages/chartjs-color.js","sourcesContent":["define([\r\n\t\"./color-convert/index\",\r\n\t\"./chartjs-color-string\"\r\n],function(convert,string){\r\n\r\n\tvar Color = function (obj) {\r\n\t\tif (obj instanceof Color) {\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t\tif (!(this instanceof Color)) {\r\n\t\t\treturn new Color(obj);\r\n\t\t}\r\n\r\n\t\tthis.valid = false;\r\n\t\tthis.values = {\r\n\t\t\trgb: [0, 0, 0],\r\n\t\t\thsl: [0, 0, 0],\r\n\t\t\thsv: [0, 0, 0],\r\n\t\t\thwb: [0, 0, 0],\r\n\t\t\tcmyk: [0, 0, 0, 0],\r\n\t\t\talpha: 1\r\n\t\t};\r\n\r\n\t\t// parse Color() argument\r\n\t\tvar vals;\r\n\t\tif (typeof obj === 'string') {\r\n\t\t\tvals = string.getRgba(obj);\r\n\t\t\tif (vals) {\r\n\t\t\t\tthis.setValues('rgb', vals);\r\n\t\t\t} else if (vals = string.getHsla(obj)) {\r\n\t\t\t\tthis.setValues('hsl', vals);\r\n\t\t\t} else if (vals = string.getHwb(obj)) {\r\n\t\t\t\tthis.setValues('hwb', vals);\r\n\t\t\t}\r\n\t\t} else if (typeof obj === 'object') {\r\n\t\t\tvals = obj;\r\n\t\t\tif (vals.r !== undefined || vals.red !== undefined) {\r\n\t\t\t\tthis.setValues('rgb', vals);\r\n\t\t\t} else if (vals.l !== undefined || vals.lightness !== undefined) {\r\n\t\t\t\tthis.setValues('hsl', vals);\r\n\t\t\t} else if (vals.v !== undefined || vals.value !== undefined) {\r\n\t\t\t\tthis.setValues('hsv', vals);\r\n\t\t\t} else if (vals.w !== undefined || vals.whiteness !== undefined) {\r\n\t\t\t\tthis.setValues('hwb', vals);\r\n\t\t\t} else if (vals.c !== undefined || vals.cyan !== undefined) {\r\n\t\t\t\tthis.setValues('cmyk', vals);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tColor.prototype = {\r\n\t\tisValid: function () {\r\n\t\t\treturn this.valid;\r\n\t\t},\r\n\t\trgb: function () {\r\n\t\t\treturn this.setSpace('rgb', arguments);\r\n\t\t},\r\n\t\thsl: function () {\r\n\t\t\treturn this.setSpace('hsl', arguments);\r\n\t\t},\r\n\t\thsv: function () {\r\n\t\t\treturn this.setSpace('hsv', arguments);\r\n\t\t},\r\n\t\thwb: function () {\r\n\t\t\treturn this.setSpace('hwb', arguments);\r\n\t\t},\r\n\t\tcmyk: function () {\r\n\t\t\treturn this.setSpace('cmyk', arguments);\r\n\t\t},\r\n\r\n\t\trgbArray: function () {\r\n\t\t\treturn this.values.rgb;\r\n\t\t},\r\n\t\thslArray: function () {\r\n\t\t\treturn this.values.hsl;\r\n\t\t},\r\n\t\thsvArray: function () {\r\n\t\t\treturn this.values.hsv;\r\n\t\t},\r\n\t\thwbArray: function () {\r\n\t\t\tvar values = this.values;\r\n\t\t\tif (values.alpha !== 1) {\r\n\t\t\t\treturn values.hwb.concat([values.alpha]);\r\n\t\t\t}\r\n\t\t\treturn values.hwb;\r\n\t\t},\r\n\t\tcmykArray: function () {\r\n\t\t\treturn this.values.cmyk;\r\n\t\t},\r\n\t\trgbaArray: function () {\r\n\t\t\tvar values = this.values;\r\n\t\t\treturn values.rgb.concat([values.alpha]);\r\n\t\t},\r\n\t\thslaArray: function () {\r\n\t\t\tvar values = this.values;\r\n\t\t\treturn values.hsl.concat([values.alpha]);\r\n\t\t},\r\n\t\talpha: function (val) {\r\n\t\t\tif (val === undefined) {\r\n\t\t\t\treturn this.values.alpha;\r\n\t\t\t}\r\n\t\t\tthis.setValues('alpha', val);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tred: function (val) {\r\n\t\t\treturn this.setChannel('rgb', 0, val);\r\n\t\t},\r\n\t\tgreen: function (val) {\r\n\t\t\treturn this.setChannel('rgb', 1, val);\r\n\t\t},\r\n\t\tblue: function (val) {\r\n\t\t\treturn this.setChannel('rgb', 2, val);\r\n\t\t},\r\n\t\thue: function (val) {\r\n\t\t\tif (val) {\r\n\t\t\t\tval %= 360;\r\n\t\t\t\tval = val < 0 ? 360 + val : val;\r\n\t\t\t}\r\n\t\t\treturn this.setChannel('hsl', 0, val);\r\n\t\t},\r\n\t\tsaturation: function (val) {\r\n\t\t\treturn this.setChannel('hsl', 1, val);\r\n\t\t},\r\n\t\tlightness: function (val) {\r\n\t\t\treturn this.setChannel('hsl', 2, val);\r\n\t\t},\r\n\t\tsaturationv: function (val) {\r\n\t\t\treturn this.setChannel('hsv', 1, val);\r\n\t\t},\r\n\t\twhiteness: function (val) {\r\n\t\t\treturn this.setChannel('hwb', 1, val);\r\n\t\t},\r\n\t\tblackness: function (val) {\r\n\t\t\treturn this.setChannel('hwb', 2, val);\r\n\t\t},\r\n\t\tvalue: function (val) {\r\n\t\t\treturn this.setChannel('hsv', 2, val);\r\n\t\t},\r\n\t\tcyan: function (val) {\r\n\t\t\treturn this.setChannel('cmyk', 0, val);\r\n\t\t},\r\n\t\tmagenta: function (val) {\r\n\t\t\treturn this.setChannel('cmyk', 1, val);\r\n\t\t},\r\n\t\tyellow: function (val) {\r\n\t\t\treturn this.setChannel('cmyk', 2, val);\r\n\t\t},\r\n\t\tblack: function (val) {\r\n\t\t\treturn this.setChannel('cmyk', 3, val);\r\n\t\t},\r\n\r\n\t\thexString: function () {\r\n\t\t\treturn string.hexString(this.values.rgb);\r\n\t\t},\r\n\t\trgbString: function () {\r\n\t\t\treturn string.rgbString(this.values.rgb, this.values.alpha);\r\n\t\t},\r\n\t\trgbaString: function () {\r\n\t\t\treturn string.rgbaString(this.values.rgb, this.values.alpha);\r\n\t\t},\r\n\t\tpercentString: function () {\r\n\t\t\treturn string.percentString(this.values.rgb, this.values.alpha);\r\n\t\t},\r\n\t\thslString: function () {\r\n\t\t\treturn string.hslString(this.values.hsl, this.values.alpha);\r\n\t\t},\r\n\t\thslaString: function () {\r\n\t\t\treturn string.hslaString(this.values.hsl, this.values.alpha);\r\n\t\t},\r\n\t\thwbString: function () {\r\n\t\t\treturn string.hwbString(this.values.hwb, this.values.alpha);\r\n\t\t},\r\n\t\tkeyword: function () {\r\n\t\t\treturn string.keyword(this.values.rgb, this.values.alpha);\r\n\t\t},\r\n\r\n\t\trgbNumber: function () {\r\n\t\t\tvar rgb = this.values.rgb;\r\n\t\t\treturn (rgb[0] << 16) | (rgb[1] << 8) | rgb[2];\r\n\t\t},\r\n\r\n\t\tluminosity: function () {\r\n\t\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\r\n\t\t\tvar rgb = this.values.rgb;\r\n\t\t\tvar lum = [];\r\n\t\t\tfor (var i = 0; i < rgb.length; i++) {\r\n\t\t\t\tvar chan = rgb[i] / 255;\r\n\t\t\t\tlum[i] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\r\n\t\t\t}\r\n\t\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\r\n\t\t},\r\n\r\n\t\tcontrast: function (color2) {\r\n\t\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\r\n\t\t\tvar lum1 = this.luminosity();\r\n\t\t\tvar lum2 = color2.luminosity();\r\n\t\t\tif (lum1 > lum2) {\r\n\t\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\r\n\t\t\t}\r\n\t\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\r\n\t\t},\r\n\r\n\t\tlevel: function (color2) {\r\n\t\t\tvar contrastRatio = this.contrast(color2);\r\n\t\t\tif (contrastRatio >= 7.1) {\r\n\t\t\t\treturn 'AAA';\r\n\t\t\t}\r\n\r\n\t\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\r\n\t\t},\r\n\r\n\t\tdark: function () {\r\n\t\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\r\n\t\t\tvar rgb = this.values.rgb;\r\n\t\t\tvar yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\r\n\t\t\treturn yiq < 128;\r\n\t\t},\r\n\r\n\t\tlight: function () {\r\n\t\t\treturn !this.dark();\r\n\t\t},\r\n\r\n\t\tnegate: function () {\r\n\t\t\tvar rgb = [];\r\n\t\t\tfor (var i = 0; i < 3; i++) {\r\n\t\t\t\trgb[i] = 255 - this.values.rgb[i];\r\n\t\t\t}\r\n\t\t\tthis.setValues('rgb', rgb);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tlighten: function (ratio) {\r\n\t\t\tvar hsl = this.values.hsl;\r\n\t\t\thsl[2] += hsl[2] * ratio;\r\n\t\t\tthis.setValues('hsl', hsl);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tdarken: function (ratio) {\r\n\t\t\tvar hsl = this.values.hsl;\r\n\t\t\thsl[2] -= hsl[2] * ratio;\r\n\t\t\tthis.setValues('hsl', hsl);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tsaturate: function (ratio) {\r\n\t\t\tvar hsl = this.values.hsl;\r\n\t\t\thsl[1] += hsl[1] * ratio;\r\n\t\t\tthis.setValues('hsl', hsl);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tdesaturate: function (ratio) {\r\n\t\t\tvar hsl = this.values.hsl;\r\n\t\t\thsl[1] -= hsl[1] * ratio;\r\n\t\t\tthis.setValues('hsl', hsl);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\twhiten: function (ratio) {\r\n\t\t\tvar hwb = this.values.hwb;\r\n\t\t\thwb[1] += hwb[1] * ratio;\r\n\t\t\tthis.setValues('hwb', hwb);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tblacken: function (ratio) {\r\n\t\t\tvar hwb = this.values.hwb;\r\n\t\t\thwb[2] += hwb[2] * ratio;\r\n\t\t\tthis.setValues('hwb', hwb);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tgreyscale: function () {\r\n\t\t\tvar rgb = this.values.rgb;\r\n\t\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\r\n\t\t\tvar val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\r\n\t\t\tthis.setValues('rgb', [val, val, val]);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tclearer: function (ratio) {\r\n\t\t\tvar alpha = this.values.alpha;\r\n\t\t\tthis.setValues('alpha', alpha - (alpha * ratio));\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\topaquer: function (ratio) {\r\n\t\t\tvar alpha = this.values.alpha;\r\n\t\t\tthis.setValues('alpha', alpha + (alpha * ratio));\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\trotate: function (degrees) {\r\n\t\t\tvar hsl = this.values.hsl;\r\n\t\t\tvar hue = (hsl[0] + degrees) % 360;\r\n\t\t\thsl[0] = hue < 0 ? 360 + hue : hue;\r\n\t\t\tthis.setValues('hsl', hsl);\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Ported from sass implementation in C\r\n\t\t * https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\r\n\t\t */\r\n\t\tmix: function (mixinColor, weight) {\r\n\t\t\tvar color1 = this;\r\n\t\t\tvar color2 = mixinColor;\r\n\t\t\tvar p = weight === undefined ? 0.5 : weight;\r\n\r\n\t\t\tvar w = 2 * p - 1;\r\n\t\t\tvar a = color1.alpha() - color2.alpha();\r\n\r\n\t\t\tvar w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\r\n\t\t\tvar w2 = 1 - w1;\r\n\r\n\t\t\treturn this\r\n\t\t\t\t.rgb(\r\n\t\t\t\t\tw1 * color1.red() + w2 * color2.red(),\r\n\t\t\t\t\tw1 * color1.green() + w2 * color2.green(),\r\n\t\t\t\t\tw1 * color1.blue() + w2 * color2.blue()\r\n\t\t\t\t)\r\n\t\t\t\t.alpha(color1.alpha() * p + color2.alpha() * (1 - p));\r\n\t\t},\r\n\r\n\t\ttoJSON: function () {\r\n\t\t\treturn this.rgb();\r\n\t\t},\r\n\r\n\t\tclone: function () {\r\n\t\t\t// NOTE(SB): using node-clone creates a dependency to Buffer when using browserify,\r\n\t\t\t// making the final build way to big to embed in Chart.js. So let's do it manually,\r\n\t\t\t// assuming that values to clone are 1 dimension arrays containing only numbers,\r\n\t\t\t// except 'alpha' which is a number.\r\n\t\t\tvar result = new Color();\r\n\t\t\tvar source = this.values;\r\n\t\t\tvar target = result.values;\r\n\t\t\tvar value, type;\r\n\r\n\t\t\tfor (var prop in source) {\r\n\t\t\t\tif (source.hasOwnProperty(prop)) {\r\n\t\t\t\t\tvalue = source[prop];\r\n\t\t\t\t\ttype = ({}).toString.call(value);\r\n\t\t\t\t\tif (type === '[object Array]') {\r\n\t\t\t\t\t\ttarget[prop] = value.slice(0);\r\n\t\t\t\t\t} else if (type === '[object Number]') {\r\n\t\t\t\t\t\ttarget[prop] = value;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.error('unexpected color value:', value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\t};\r\n\r\n\tColor.prototype.spaces = {\r\n\t\trgb: ['red', 'green', 'blue'],\r\n\t\thsl: ['hue', 'saturation', 'lightness'],\r\n\t\thsv: ['hue', 'saturation', 'value'],\r\n\t\thwb: ['hue', 'whiteness', 'blackness'],\r\n\t\tcmyk: ['cyan', 'magenta', 'yellow', 'black']\r\n\t};\r\n\r\n\tColor.prototype.maxes = {\r\n\t\trgb: [255, 255, 255],\r\n\t\thsl: [360, 100, 100],\r\n\t\thsv: [360, 100, 100],\r\n\t\thwb: [360, 100, 100],\r\n\t\tcmyk: [100, 100, 100, 100]\r\n\t};\r\n\r\n\tColor.prototype.getValues = function (space) {\r\n\t\tvar values = this.values;\r\n\t\tvar vals = {};\r\n\r\n\t\tfor (var i = 0; i < space.length; i++) {\r\n\t\t\tvals[space.charAt(i)] = values[space][i];\r\n\t\t}\r\n\r\n\t\tif (values.alpha !== 1) {\r\n\t\t\tvals.a = values.alpha;\r\n\t\t}\r\n\r\n\t\t// {r: 255, g: 255, b: 255, a: 0.4}\r\n\t\treturn vals;\r\n\t};\r\n\r\n\tColor.prototype.setValues = function (space, vals) {\r\n\t\tvar values = this.values;\r\n\t\tvar spaces = this.spaces;\r\n\t\tvar maxes = this.maxes;\r\n\t\tvar alpha = 1;\r\n\t\tvar i;\r\n\r\n\t\tthis.valid = true;\r\n\r\n\t\tif (space === 'alpha') {\r\n\t\t\talpha = vals;\r\n\t\t} else if (vals.length) {\r\n\t\t\t// [10, 10, 10]\r\n\t\t\tvalues[space] = vals.slice(0, space.length);\r\n\t\t\talpha = vals[space.length];\r\n\t\t} else if (vals[space.charAt(0)] !== undefined) {\r\n\t\t\t// {r: 10, g: 10, b: 10}\r\n\t\t\tfor (i = 0; i < space.length; i++) {\r\n\t\t\t\tvalues[space][i] = vals[space.charAt(i)];\r\n\t\t\t}\r\n\r\n\t\t\talpha = vals.a;\r\n\t\t} else if (vals[spaces[space][0]] !== undefined) {\r\n\t\t\t// {red: 10, green: 10, blue: 10}\r\n\t\t\tvar chans = spaces[space];\r\n\r\n\t\t\tfor (i = 0; i < space.length; i++) {\r\n\t\t\t\tvalues[space][i] = vals[chans[i]];\r\n\t\t\t}\r\n\r\n\t\t\talpha = vals.alpha;\r\n\t\t}\r\n\r\n\t\tvalues.alpha = Math.max(0, Math.min(1, (alpha === undefined ? values.alpha : alpha)));\r\n\r\n\t\tif (space === 'alpha') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar capped;\r\n\r\n\t\t// cap values of the space prior converting all values\r\n\t\tfor (i = 0; i < space.length; i++) {\r\n\t\t\tcapped = Math.max(0, Math.min(maxes[space][i], values[space][i]));\r\n\t\t\tvalues[space][i] = Math.round(capped);\r\n\t\t}\r\n\r\n\t\t// convert to all the other color spaces\r\n\t\tfor (var sname in spaces) {\r\n\t\t\tif (sname !== space) {\r\n\t\t\t\tvalues[sname] = convert[space][sname](values[space]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\tColor.prototype.setSpace = function (space, args) {\r\n\t\tvar vals = args[0];\r\n\r\n\t\tif (vals === undefined) {\r\n\t\t\t// color.rgb()\r\n\t\t\treturn this.getValues(space);\r\n\t\t}\r\n\r\n\t\t// color.rgb(10, 10, 10)\r\n\t\tif (typeof vals === 'number') {\r\n\t\t\tvals = Array.prototype.slice.call(args);\r\n\t\t}\r\n\r\n\t\tthis.setValues(space, vals);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tColor.prototype.setChannel = function (space, index, val) {\r\n\t\tvar svalues = this.values[space];\r\n\t\tif (val === undefined) {\r\n\t\t\t// color.red()\r\n\t\t\treturn svalues[index];\r\n\t\t} else if (val === svalues[index]) {\r\n\t\t\t// color.red(color.red())\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t// color.red(100)\r\n\t\tsvalues[index] = val;\r\n\t\tthis.setValues(space, svalues);\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\treturn Color;\r\n});"]}