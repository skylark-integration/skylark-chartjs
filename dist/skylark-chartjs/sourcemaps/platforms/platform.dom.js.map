{"version":3,"sources":["platforms/platform.dom.js"],"names":["define","__module__0","__module__1","exports","module","helpers","stylesheet","EXPANDO_KEY","CSS_SIZE_MONITOR","CSS_PREFIX","CSS_RENDER_MONITOR","CSS_RENDER_ANIMATION","ANIMATION_START_EVENTS","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","readUsedSize","element","property","value","getStyle","matches","match","Number","undefined","eventListenerOptions","supports","options","Object","defineProperty","get","window","addEventListener","e","passive","addListener","node","type","listener","removeListener","removeEventListener","createEvent","chart","x","y","nativeEvent","native","createDiv","cls","el","document","createElement","className","addResizeListener","fn","thisArg","ticking","args","expando","resizer","handler","expand","shrink","appendChild","_reset","scrollLeft","scrollTop","onScroll","bind","createResizer","container","maintainAspectRatio","parentNode","w","clientWidth","canvas","Array","prototype","slice","call","arguments","this","requestAnimFrame","apply","proxy","renderProxy","animationName","each","reflow","offsetParent","classList","add","watchForRender","insertBefore","firstChild","removeResizeListener","remove","unwatchForRender","removeChild","__isValidToReturn","obj","isArray","attr","__isEmptyObject","disableCSSInjection","_enabled","_ensureLoaded","platform","css","style","_loaded","_style","setAttribute","getElementsByTagName","createTextNode","acquireContext","item","config","getElementById","length","context","getContext","renderHeight","getAttribute","renderWidth","initial","height","width","display","displayWidth","aspectRatio","displayHeight","initCanvas","releaseContext","forEach","prop","isNullOrUndef","removeAttribute","key","proxies","id","event","pos","getRelativePosition","fromNativeEvent","addEvent","removeEvent"],"mappings":"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","file":"../../platforms/platform.dom.js","sourcesContent":["define([\n    '../helpers/index',\n    './platform.dom.css'\n], function (__module__0, __module__1) {\n    'use strict';\n    var exports = {};\n    var module = { exports: {} };\n    var helpers = __module__0;\n    var stylesheet = __module__1;\n    var EXPANDO_KEY = '$chartjs';\n    var CSS_PREFIX = 'chartjs-';\n    var CSS_SIZE_MONITOR = CSS_PREFIX + 'size-monitor';\n    var CSS_RENDER_MONITOR = CSS_PREFIX + 'render-monitor';\n    var CSS_RENDER_ANIMATION = CSS_PREFIX + 'render-animation';\n    var ANIMATION_START_EVENTS = [\n        'animationstart',\n        'webkitAnimationStart'\n    ];\n    var EVENT_TYPES = {\n        touchstart: 'mousedown',\n        touchmove: 'mousemove',\n        touchend: 'mouseup',\n        pointerenter: 'mouseenter',\n        pointerdown: 'mousedown',\n        pointermove: 'mousemove',\n        pointerup: 'mouseup',\n        pointerleave: 'mouseout',\n        pointerout: 'mouseout'\n    };\n    function readUsedSize(element, property) {\n        var value = helpers.getStyle(element, property);\n        var matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n        return matches ? Number(matches[1]) : undefined;\n    }\n    function initCanvas(canvas, config) {\n        var style = canvas.style;\n        var renderHeight = canvas.getAttribute('height');\n        var renderWidth = canvas.getAttribute('width');\n        canvas[EXPANDO_KEY] = {\n            initial: {\n                height: renderHeight,\n                width: renderWidth,\n                style: {\n                    display: style.display,\n                    height: style.height,\n                    width: style.width\n                }\n            }\n        };\n        style.display = style.display || 'block';\n        if (renderWidth === null || renderWidth === '') {\n            var displayWidth = readUsedSize(canvas, 'width');\n            if (displayWidth !== undefined) {\n                canvas.width = displayWidth;\n            }\n        }\n        if (renderHeight === null || renderHeight === '') {\n            if (canvas.style.height === '') {\n                canvas.height = canvas.width / (config.options.aspectRatio || 2);\n            } else {\n                var displayHeight = readUsedSize(canvas, 'height');\n                if (displayWidth !== undefined) {\n                    canvas.height = displayHeight;\n                }\n            }\n        }\n        return canvas;\n    }\n    var supportsEventListenerOptions = function () {\n        var supports = false;\n        try {\n            var options = Object.defineProperty({}, 'passive', {\n                get: function () {\n                    supports = true;\n                }\n            });\n            window.addEventListener('e', null, options);\n        } catch (e) {\n        }\n        return supports;\n    }();\n    var eventListenerOptions = supportsEventListenerOptions ? { passive: true } : false;\n    function addListener(node, type, listener) {\n        node.addEventListener(type, listener, eventListenerOptions);\n    }\n    function removeListener(node, type, listener) {\n        node.removeEventListener(type, listener, eventListenerOptions);\n    }\n    function createEvent(type, chart, x, y, nativeEvent) {\n        return {\n            type: type,\n            chart: chart,\n            native: nativeEvent || null,\n            x: x !== undefined ? x : null,\n            y: y !== undefined ? y : null\n        };\n    }\n    function fromNativeEvent(event, chart) {\n        var type = EVENT_TYPES[event.type] || event.type;\n        var pos = helpers.getRelativePosition(event, chart);\n        return createEvent(type, chart, pos.x, pos.y, event);\n    }\n    function throttled(fn, thisArg) {\n        var ticking = false;\n        var args = [];\n        return function () {\n            args = Array.prototype.slice.call(arguments);\n            thisArg = thisArg || this;\n            if (!ticking) {\n                ticking = true;\n                helpers.requestAnimFrame.call(window, function () {\n                    ticking = false;\n                    fn.apply(thisArg, args);\n                });\n            }\n        };\n    }\n    function createDiv(cls) {\n        var el = document.createElement('div');\n        el.className = cls || '';\n        return el;\n    }\n    function createResizer(handler) {\n        var maxSize = 1000000;\n        var resizer = createDiv(CSS_SIZE_MONITOR);\n        var expand = createDiv(CSS_SIZE_MONITOR + '-expand');\n        var shrink = createDiv(CSS_SIZE_MONITOR + '-shrink');\n        expand.appendChild(createDiv());\n        shrink.appendChild(createDiv());\n        resizer.appendChild(expand);\n        resizer.appendChild(shrink);\n        resizer._reset = function () {\n            expand.scrollLeft = maxSize;\n            expand.scrollTop = maxSize;\n            shrink.scrollLeft = maxSize;\n            shrink.scrollTop = maxSize;\n        };\n        var onScroll = function () {\n            resizer._reset();\n            handler();\n        };\n        addListener(expand, 'scroll', onScroll.bind(expand, 'expand'));\n        addListener(shrink, 'scroll', onScroll.bind(shrink, 'shrink'));\n        return resizer;\n    }\n    function watchForRender(node, handler) {\n        var expando = node[EXPANDO_KEY] || (node[EXPANDO_KEY] = {});\n        var proxy = expando.renderProxy = function (e) {\n            if (e.animationName === CSS_RENDER_ANIMATION) {\n                handler();\n            }\n        };\n        helpers.each(ANIMATION_START_EVENTS, function (type) {\n            addListener(node, type, proxy);\n        });\n        expando.reflow = !!node.offsetParent;\n        node.classList.add(CSS_RENDER_MONITOR);\n    }\n    function unwatchForRender(node) {\n        var expando = node[EXPANDO_KEY] || {};\n        var proxy = expando.renderProxy;\n        if (proxy) {\n            helpers.each(ANIMATION_START_EVENTS, function (type) {\n                removeListener(node, type, proxy);\n            });\n            delete expando.renderProxy;\n        }\n        node.classList.remove(CSS_RENDER_MONITOR);\n    }\n    function addResizeListener(node, listener, chart) {\n        var expando = node[EXPANDO_KEY] || (node[EXPANDO_KEY] = {});\n        var resizer = expando.resizer = createResizer(throttled(function () {\n            if (expando.resizer) {\n                var container = chart.options.maintainAspectRatio && node.parentNode;\n                var w = container ? container.clientWidth : 0;\n                listener(createEvent('resize', chart));\n                if (container && container.clientWidth < w && chart.canvas) {\n                    listener(createEvent('resize', chart));\n                }\n            }\n        }));\n        watchForRender(node, function () {\n            if (expando.resizer) {\n                var container = node.parentNode;\n                if (container && container !== resizer.parentNode) {\n                    container.insertBefore(resizer, container.firstChild);\n                }\n                resizer._reset();\n            }\n        });\n    }\n    function removeResizeListener(node) {\n        var expando = node[EXPANDO_KEY] || {};\n        var resizer = expando.resizer;\n        delete expando.resizer;\n        unwatchForRender(node);\n        if (resizer && resizer.parentNode) {\n            resizer.parentNode.removeChild(resizer);\n        }\n    }\n    function injectCSS(platform, css) {\n        var style = platform._style || document.createElement('style');\n        if (!platform._style) {\n            platform._style = style;\n            css = '/* Chart.js */\\n' + css;\n            style.setAttribute('type', 'text/css');\n            document.getElementsByTagName('head')[0].appendChild(style);\n        }\n        style.appendChild(document.createTextNode(css));\n    }\n    module.exports = {\n        disableCSSInjection: false,\n        _enabled: typeof window !== 'undefined' && typeof document !== 'undefined',\n        _ensureLoaded: function () {\n            if (this._loaded) {\n                return;\n            }\n            this._loaded = true;\n            if (!this.disableCSSInjection) {\n                injectCSS(this, stylesheet);\n            }\n        },\n        acquireContext: function (item, config) {\n            if (typeof item === 'string') {\n                item = document.getElementById(item);\n            } else if (item.length) {\n                item = item[0];\n            }\n            if (item && item.canvas) {\n                item = item.canvas;\n            }\n            var context = item && item.getContext && item.getContext('2d');\n            this._ensureLoaded();\n            if (context && context.canvas === item) {\n                initCanvas(item, config);\n                return context;\n            }\n            return null;\n        },\n        releaseContext: function (context) {\n            var canvas = context.canvas;\n            if (!canvas[EXPANDO_KEY]) {\n                return;\n            }\n            var initial = canvas[EXPANDO_KEY].initial;\n            [\n                'height',\n                'width'\n            ].forEach(function (prop) {\n                var value = initial[prop];\n                if (helpers.isNullOrUndef(value)) {\n                    canvas.removeAttribute(prop);\n                } else {\n                    canvas.setAttribute(prop, value);\n                }\n            });\n            helpers.each(initial.style || {}, function (value, key) {\n                canvas.style[key] = value;\n            });\n            canvas.width = canvas.width;\n            delete canvas[EXPANDO_KEY];\n        },\n        addEventListener: function (chart, type, listener) {\n            var canvas = chart.canvas;\n            if (type === 'resize') {\n                addResizeListener(canvas, listener, chart);\n                return;\n            }\n            var expando = listener[EXPANDO_KEY] || (listener[EXPANDO_KEY] = {});\n            var proxies = expando.proxies || (expando.proxies = {});\n            var proxy = proxies[chart.id + '_' + type] = function (event) {\n                listener(fromNativeEvent(event, chart));\n            };\n            addListener(canvas, type, proxy);\n        },\n        removeEventListener: function (chart, type, listener) {\n            var canvas = chart.canvas;\n            if (type === 'resize') {\n                removeResizeListener(canvas);\n                return;\n            }\n            var expando = listener[EXPANDO_KEY] || {};\n            var proxies = expando.proxies || {};\n            var proxy = proxies[chart.id + '_' + type];\n            if (!proxy) {\n                return;\n            }\n            removeListener(canvas, type, proxy);\n        }\n    };\n    helpers.addEvent = addListener;\n    helpers.removeEvent = removeListener;\n    function __isEmptyObject(obj) {\n        var attr;\n        for (attr in obj)\n            return !1;\n        return !0;\n    }\n    function __isValidToReturn(obj) {\n        return typeof obj != 'object' || Array.isArray(obj) || !__isEmptyObject(obj);\n    }\n    if (__isValidToReturn(module.exports))\n        return module.exports;\n    else if (__isValidToReturn(exports))\n        return exports;\n});"]}