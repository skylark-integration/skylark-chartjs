{"version":3,"sources":["core/core.tooltip.js"],"names":["define","__module__0","__module__1","__module__2","exports","module","defaults","Element","helpers","valueOrDefault","_set","tooltips","enabled","custom","mode","position","intersect","backgroundColor","titleFontStyle","titleSpacing","titleMarginBottom","titleFontColor","titleAlign","bodySpacing","bodyFontColor","bodyAlign","footerFontStyle","footerSpacing","footerMarginTop","footerFontColor","footerAlign","yPadding","xPadding","caretPadding","caretSize","cornerRadius","multiKeyBackground","displayColors","borderColor","borderWidth","callbacks","beforeTitle","noop","title","tooltipItems","data","labels","labelCount","length","item","label","xLabel","index","afterTitle","beforeBody","beforeLabel","tooltipItem","datasets","datasetIndex","isNullOrUndef","value","yLabel","labelColor","chart","view","getDatasetMeta","_view","labelTextColor","this","_options","afterLabel","afterBody","beforeFooter","footer","afterFooter","positioners","average","elements","i","len","x","y","count","el","hasValue","pos","tooltipPosition","nearest","eventPosition","nearestElement","minDistance","Number","POSITIVE_INFINITY","center","getCenterPoint","d","distanceBetweenPoints","tp","pushOrConcat","base","toPush","isArray","Array","prototype","push","apply","splitNewlines","str","String","indexOf","split","getBaseModel","tooltipOpts","globalDefaults","global","xAlign","yAlign","_bodyFontFamily","bodyFontFamily","defaultFontFamily","_bodyFontStyle","bodyFontStyle","defaultFontStyle","_bodyAlign","bodyFontSize","defaultFontSize","_titleFontFamily","titleFontFamily","_titleFontStyle","titleFontSize","_titleAlign","_footerFontFamily","footerFontFamily","_footerFontStyle","footerFontSize","_footerAlign","opacity","legendColorBackground","getAlignedX","vm","align","width","getBeforeAfterBodyLines","callback","__isValidToReturn","obj","attr","__isEmptyObject","extend","initialize","_model","_lastActive","getTitle","arguments","lines","getBeforeBody","getBody","me","bodyItems","each","bodyItem","before","after","call","getAfterBody","getFooter","update","changed","element","xScale","yScale","controller","indexScale","valueScale","opts","existingModel","model","active","_active","_data","alignment","backgroundPoint","tooltipSize","height","caretX","caretY","labelColors","labelTextColors","_eventPosition","_xScale","_yScale","_scale","_index","_datasetIndex","_chart","_getIndexScale","_getValueScale","getLabelForIndex","filter","a","itemSort","sort","b","body","dataPoints","size","paddingAndSize","radiusAndPadding","getBackgroundPoint","tooltip","ctx","combinedBodyLength","reduce","titleLineCount","footerLineCount","widthPadding","maxLineWidth","line","Math","max","measureText","font","fontString","concat","getTooltipSize","lf","rf","olf","orf","yf","chartArea","midX","left","right","midY","top","bottom","determineAlignment","drawCaret","tooltipPoint","caretPosition","getCaretPosition","lineTo","x1","y1","x2","y2","x3","y3","ptX","ptY","tmp","drawTitle","pt","textAlign","textBaseline","fillStyle","fillText","drawBody","textColor","drawColorBoxes","xLinePadding","colorX","fillLineOfText","fillRect","lineWidth","strokeStyle","strokeRect","drawFooter","drawBackground","radius","beginPath","moveTo","quadraticCurveTo","closePath","fill","stroke","draw","abs","hasTooltipContent","save","globalAlpha","restore","handleEvent","e","options","type","getElementsAtEventForMode","arrayEquals","pivot"],"mappings":"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","file":"../../core/core.tooltip.js","sourcesContent":["define([\n    './core.defaults',\n    './core.element',\n    '../helpers/index'\n], function (__module__0, __module__1, __module__2) {\n    'use strict';\n    var exports = {};\n    var module = { exports: {} };\n    var defaults = __module__0;\n    var Element = __module__1;\n    var helpers = __module__2;\n    var valueOrDefault = helpers.valueOrDefault;\n    defaults._set('global', {\n        tooltips: {\n            enabled: true,\n            custom: null,\n            mode: 'nearest',\n            position: 'average',\n            intersect: true,\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            titleFontStyle: 'bold',\n            titleSpacing: 2,\n            titleMarginBottom: 6,\n            titleFontColor: '#fff',\n            titleAlign: 'left',\n            bodySpacing: 2,\n            bodyFontColor: '#fff',\n            bodyAlign: 'left',\n            footerFontStyle: 'bold',\n            footerSpacing: 2,\n            footerMarginTop: 6,\n            footerFontColor: '#fff',\n            footerAlign: 'left',\n            yPadding: 6,\n            xPadding: 6,\n            caretPadding: 2,\n            caretSize: 5,\n            cornerRadius: 6,\n            multiKeyBackground: '#fff',\n            displayColors: true,\n            borderColor: 'rgba(0,0,0,0)',\n            borderWidth: 0,\n            callbacks: {\n                beforeTitle: helpers.noop,\n                title: function (tooltipItems, data) {\n                    var title = '';\n                    var labels = data.labels;\n                    var labelCount = labels ? labels.length : 0;\n                    if (tooltipItems.length > 0) {\n                        var item = tooltipItems[0];\n                        if (item.label) {\n                            title = item.label;\n                        } else if (item.xLabel) {\n                            title = item.xLabel;\n                        } else if (labelCount > 0 && item.index < labelCount) {\n                            title = labels[item.index];\n                        }\n                    }\n                    return title;\n                },\n                afterTitle: helpers.noop,\n                beforeBody: helpers.noop,\n                beforeLabel: helpers.noop,\n                label: function (tooltipItem, data) {\n                    var label = data.datasets[tooltipItem.datasetIndex].label || '';\n                    if (label) {\n                        label += ': ';\n                    }\n                    if (!helpers.isNullOrUndef(tooltipItem.value)) {\n                        label += tooltipItem.value;\n                    } else {\n                        label += tooltipItem.yLabel;\n                    }\n                    return label;\n                },\n                labelColor: function (tooltipItem, chart) {\n                    var meta = chart.getDatasetMeta(tooltipItem.datasetIndex);\n                    var activeElement = meta.data[tooltipItem.index];\n                    var view = activeElement._view;\n                    return {\n                        borderColor: view.borderColor,\n                        backgroundColor: view.backgroundColor\n                    };\n                },\n                labelTextColor: function () {\n                    return this._options.bodyFontColor;\n                },\n                afterLabel: helpers.noop,\n                afterBody: helpers.noop,\n                beforeFooter: helpers.noop,\n                footer: helpers.noop,\n                afterFooter: helpers.noop\n            }\n        }\n    });\n    var positioners = {\n        average: function (elements) {\n            if (!elements.length) {\n                return false;\n            }\n            var i, len;\n            var x = 0;\n            var y = 0;\n            var count = 0;\n            for (i = 0, len = elements.length; i < len; ++i) {\n                var el = elements[i];\n                if (el && el.hasValue()) {\n                    var pos = el.tooltipPosition();\n                    x += pos.x;\n                    y += pos.y;\n                    ++count;\n                }\n            }\n            return {\n                x: x / count,\n                y: y / count\n            };\n        },\n        nearest: function (elements, eventPosition) {\n            var x = eventPosition.x;\n            var y = eventPosition.y;\n            var minDistance = Number.POSITIVE_INFINITY;\n            var i, len, nearestElement;\n            for (i = 0, len = elements.length; i < len; ++i) {\n                var el = elements[i];\n                if (el && el.hasValue()) {\n                    var center = el.getCenterPoint();\n                    var d = helpers.distanceBetweenPoints(eventPosition, center);\n                    if (d < minDistance) {\n                        minDistance = d;\n                        nearestElement = el;\n                    }\n                }\n            }\n            if (nearestElement) {\n                var tp = nearestElement.tooltipPosition();\n                x = tp.x;\n                y = tp.y;\n            }\n            return {\n                x: x,\n                y: y\n            };\n        }\n    };\n    function pushOrConcat(base, toPush) {\n        if (toPush) {\n            if (helpers.isArray(toPush)) {\n                Array.prototype.push.apply(base, toPush);\n            } else {\n                base.push(toPush);\n            }\n        }\n        return base;\n    }\n    function splitNewlines(str) {\n        if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\n            return str.split('\\n');\n        }\n        return str;\n    }\n    function createTooltipItem(element) {\n        var xScale = element._xScale;\n        var yScale = element._yScale || element._scale;\n        var index = element._index;\n        var datasetIndex = element._datasetIndex;\n        var controller = element._chart.getDatasetMeta(datasetIndex).controller;\n        var indexScale = controller._getIndexScale();\n        var valueScale = controller._getValueScale();\n        return {\n            xLabel: xScale ? xScale.getLabelForIndex(index, datasetIndex) : '',\n            yLabel: yScale ? yScale.getLabelForIndex(index, datasetIndex) : '',\n            label: indexScale ? '' + indexScale.getLabelForIndex(index, datasetIndex) : '',\n            value: valueScale ? '' + valueScale.getLabelForIndex(index, datasetIndex) : '',\n            index: index,\n            datasetIndex: datasetIndex,\n            x: element._model.x,\n            y: element._model.y\n        };\n    }\n    function getBaseModel(tooltipOpts) {\n        var globalDefaults = defaults.global;\n        return {\n            xPadding: tooltipOpts.xPadding,\n            yPadding: tooltipOpts.yPadding,\n            xAlign: tooltipOpts.xAlign,\n            yAlign: tooltipOpts.yAlign,\n            bodyFontColor: tooltipOpts.bodyFontColor,\n            _bodyFontFamily: valueOrDefault(tooltipOpts.bodyFontFamily, globalDefaults.defaultFontFamily),\n            _bodyFontStyle: valueOrDefault(tooltipOpts.bodyFontStyle, globalDefaults.defaultFontStyle),\n            _bodyAlign: tooltipOpts.bodyAlign,\n            bodyFontSize: valueOrDefault(tooltipOpts.bodyFontSize, globalDefaults.defaultFontSize),\n            bodySpacing: tooltipOpts.bodySpacing,\n            titleFontColor: tooltipOpts.titleFontColor,\n            _titleFontFamily: valueOrDefault(tooltipOpts.titleFontFamily, globalDefaults.defaultFontFamily),\n            _titleFontStyle: valueOrDefault(tooltipOpts.titleFontStyle, globalDefaults.defaultFontStyle),\n            titleFontSize: valueOrDefault(tooltipOpts.titleFontSize, globalDefaults.defaultFontSize),\n            _titleAlign: tooltipOpts.titleAlign,\n            titleSpacing: tooltipOpts.titleSpacing,\n            titleMarginBottom: tooltipOpts.titleMarginBottom,\n            footerFontColor: tooltipOpts.footerFontColor,\n            _footerFontFamily: valueOrDefault(tooltipOpts.footerFontFamily, globalDefaults.defaultFontFamily),\n            _footerFontStyle: valueOrDefault(tooltipOpts.footerFontStyle, globalDefaults.defaultFontStyle),\n            footerFontSize: valueOrDefault(tooltipOpts.footerFontSize, globalDefaults.defaultFontSize),\n            _footerAlign: tooltipOpts.footerAlign,\n            footerSpacing: tooltipOpts.footerSpacing,\n            footerMarginTop: tooltipOpts.footerMarginTop,\n            caretSize: tooltipOpts.caretSize,\n            cornerRadius: tooltipOpts.cornerRadius,\n            backgroundColor: tooltipOpts.backgroundColor,\n            opacity: 0,\n            legendColorBackground: tooltipOpts.multiKeyBackground,\n            displayColors: tooltipOpts.displayColors,\n            borderColor: tooltipOpts.borderColor,\n            borderWidth: tooltipOpts.borderWidth\n        };\n    }\n    function getTooltipSize(tooltip, model) {\n        var ctx = tooltip._chart.ctx;\n        var height = model.yPadding * 2;\n        var width = 0;\n        var body = model.body;\n        var combinedBodyLength = body.reduce(function (count, bodyItem) {\n            return count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length;\n        }, 0);\n        combinedBodyLength += model.beforeBody.length + model.afterBody.length;\n        var titleLineCount = model.title.length;\n        var footerLineCount = model.footer.length;\n        var titleFontSize = model.titleFontSize;\n        var bodyFontSize = model.bodyFontSize;\n        var footerFontSize = model.footerFontSize;\n        height += titleLineCount * titleFontSize;\n        height += titleLineCount ? (titleLineCount - 1) * model.titleSpacing : 0;\n        height += titleLineCount ? model.titleMarginBottom : 0;\n        height += combinedBodyLength * bodyFontSize;\n        height += combinedBodyLength ? (combinedBodyLength - 1) * model.bodySpacing : 0;\n        height += footerLineCount ? model.footerMarginTop : 0;\n        height += footerLineCount * footerFontSize;\n        height += footerLineCount ? (footerLineCount - 1) * model.footerSpacing : 0;\n        var widthPadding = 0;\n        var maxLineWidth = function (line) {\n            width = Math.max(width, ctx.measureText(line).width + widthPadding);\n        };\n        ctx.font = helpers.fontString(titleFontSize, model._titleFontStyle, model._titleFontFamily);\n        helpers.each(model.title, maxLineWidth);\n        ctx.font = helpers.fontString(bodyFontSize, model._bodyFontStyle, model._bodyFontFamily);\n        helpers.each(model.beforeBody.concat(model.afterBody), maxLineWidth);\n        widthPadding = model.displayColors ? bodyFontSize + 2 : 0;\n        helpers.each(body, function (bodyItem) {\n            helpers.each(bodyItem.before, maxLineWidth);\n            helpers.each(bodyItem.lines, maxLineWidth);\n            helpers.each(bodyItem.after, maxLineWidth);\n        });\n        widthPadding = 0;\n        ctx.font = helpers.fontString(footerFontSize, model._footerFontStyle, model._footerFontFamily);\n        helpers.each(model.footer, maxLineWidth);\n        width += 2 * model.xPadding;\n        return {\n            width: width,\n            height: height\n        };\n    }\n    function determineAlignment(tooltip, size) {\n        var model = tooltip._model;\n        var chart = tooltip._chart;\n        var chartArea = tooltip._chart.chartArea;\n        var xAlign = 'center';\n        var yAlign = 'center';\n        if (model.y < size.height) {\n            yAlign = 'top';\n        } else if (model.y > chart.height - size.height) {\n            yAlign = 'bottom';\n        }\n        var lf, rf;\n        var olf, orf;\n        var yf;\n        var midX = (chartArea.left + chartArea.right) / 2;\n        var midY = (chartArea.top + chartArea.bottom) / 2;\n        if (yAlign === 'center') {\n            lf = function (x) {\n                return x <= midX;\n            };\n            rf = function (x) {\n                return x > midX;\n            };\n        } else {\n            lf = function (x) {\n                return x <= size.width / 2;\n            };\n            rf = function (x) {\n                return x >= chart.width - size.width / 2;\n            };\n        }\n        olf = function (x) {\n            return x + size.width + model.caretSize + model.caretPadding > chart.width;\n        };\n        orf = function (x) {\n            return x - size.width - model.caretSize - model.caretPadding < 0;\n        };\n        yf = function (y) {\n            return y <= midY ? 'top' : 'bottom';\n        };\n        if (lf(model.x)) {\n            xAlign = 'left';\n            if (olf(model.x)) {\n                xAlign = 'center';\n                yAlign = yf(model.y);\n            }\n        } else if (rf(model.x)) {\n            xAlign = 'right';\n            if (orf(model.x)) {\n                xAlign = 'center';\n                yAlign = yf(model.y);\n            }\n        }\n        var opts = tooltip._options;\n        return {\n            xAlign: opts.xAlign ? opts.xAlign : xAlign,\n            yAlign: opts.yAlign ? opts.yAlign : yAlign\n        };\n    }\n    function getBackgroundPoint(vm, size, alignment, chart) {\n        var x = vm.x;\n        var y = vm.y;\n        var caretSize = vm.caretSize;\n        var caretPadding = vm.caretPadding;\n        var cornerRadius = vm.cornerRadius;\n        var xAlign = alignment.xAlign;\n        var yAlign = alignment.yAlign;\n        var paddingAndSize = caretSize + caretPadding;\n        var radiusAndPadding = cornerRadius + caretPadding;\n        if (xAlign === 'right') {\n            x -= size.width;\n        } else if (xAlign === 'center') {\n            x -= size.width / 2;\n            if (x + size.width > chart.width) {\n                x = chart.width - size.width;\n            }\n            if (x < 0) {\n                x = 0;\n            }\n        }\n        if (yAlign === 'top') {\n            y += paddingAndSize;\n        } else if (yAlign === 'bottom') {\n            y -= size.height + paddingAndSize;\n        } else {\n            y -= size.height / 2;\n        }\n        if (yAlign === 'center') {\n            if (xAlign === 'left') {\n                x += paddingAndSize;\n            } else if (xAlign === 'right') {\n                x -= paddingAndSize;\n            }\n        } else if (xAlign === 'left') {\n            x -= radiusAndPadding;\n        } else if (xAlign === 'right') {\n            x += radiusAndPadding;\n        }\n        return {\n            x: x,\n            y: y\n        };\n    }\n    function getAlignedX(vm, align) {\n        return align === 'center' ? vm.x + vm.width / 2 : align === 'right' ? vm.x + vm.width - vm.xPadding : vm.x + vm.xPadding;\n    }\n    function getBeforeAfterBodyLines(callback) {\n        return pushOrConcat([], splitNewlines(callback));\n    }\n    var exports = Element.extend({\n        initialize: function () {\n            this._model = getBaseModel(this._options);\n            this._lastActive = [];\n        },\n        getTitle: function () {\n            var me = this;\n            var opts = me._options;\n            var callbacks = opts.callbacks;\n            var beforeTitle = callbacks.beforeTitle.apply(me, arguments);\n            var title = callbacks.title.apply(me, arguments);\n            var afterTitle = callbacks.afterTitle.apply(me, arguments);\n            var lines = [];\n            lines = pushOrConcat(lines, splitNewlines(beforeTitle));\n            lines = pushOrConcat(lines, splitNewlines(title));\n            lines = pushOrConcat(lines, splitNewlines(afterTitle));\n            return lines;\n        },\n        getBeforeBody: function () {\n            return getBeforeAfterBodyLines(this._options.callbacks.beforeBody.apply(this, arguments));\n        },\n        getBody: function (tooltipItems, data) {\n            var me = this;\n            var callbacks = me._options.callbacks;\n            var bodyItems = [];\n            helpers.each(tooltipItems, function (tooltipItem) {\n                var bodyItem = {\n                    before: [],\n                    lines: [],\n                    after: []\n                };\n                pushOrConcat(bodyItem.before, splitNewlines(callbacks.beforeLabel.call(me, tooltipItem, data)));\n                pushOrConcat(bodyItem.lines, callbacks.label.call(me, tooltipItem, data));\n                pushOrConcat(bodyItem.after, splitNewlines(callbacks.afterLabel.call(me, tooltipItem, data)));\n                bodyItems.push(bodyItem);\n            });\n            return bodyItems;\n        },\n        getAfterBody: function () {\n            return getBeforeAfterBodyLines(this._options.callbacks.afterBody.apply(this, arguments));\n        },\n        getFooter: function () {\n            var me = this;\n            var callbacks = me._options.callbacks;\n            var beforeFooter = callbacks.beforeFooter.apply(me, arguments);\n            var footer = callbacks.footer.apply(me, arguments);\n            var afterFooter = callbacks.afterFooter.apply(me, arguments);\n            var lines = [];\n            lines = pushOrConcat(lines, splitNewlines(beforeFooter));\n            lines = pushOrConcat(lines, splitNewlines(footer));\n            lines = pushOrConcat(lines, splitNewlines(afterFooter));\n            return lines;\n        },\n        update: function (changed) {\n            var me = this;\n            var opts = me._options;\n            var existingModel = me._model;\n            var model = me._model = getBaseModel(opts);\n            var active = me._active;\n            var data = me._data;\n            var alignment = {\n                xAlign: existingModel.xAlign,\n                yAlign: existingModel.yAlign\n            };\n            var backgroundPoint = {\n                x: existingModel.x,\n                y: existingModel.y\n            };\n            var tooltipSize = {\n                width: existingModel.width,\n                height: existingModel.height\n            };\n            var tooltipPosition = {\n                x: existingModel.caretX,\n                y: existingModel.caretY\n            };\n            var i, len;\n            if (active.length) {\n                model.opacity = 1;\n                var labelColors = [];\n                var labelTextColors = [];\n                tooltipPosition = positioners[opts.position].call(me, active, me._eventPosition);\n                var tooltipItems = [];\n                for (i = 0, len = active.length; i < len; ++i) {\n                    tooltipItems.push(createTooltipItem(active[i]));\n                }\n                if (opts.filter) {\n                    tooltipItems = tooltipItems.filter(function (a) {\n                        return opts.filter(a, data);\n                    });\n                }\n                if (opts.itemSort) {\n                    tooltipItems = tooltipItems.sort(function (a, b) {\n                        return opts.itemSort(a, b, data);\n                    });\n                }\n                helpers.each(tooltipItems, function (tooltipItem) {\n                    labelColors.push(opts.callbacks.labelColor.call(me, tooltipItem, me._chart));\n                    labelTextColors.push(opts.callbacks.labelTextColor.call(me, tooltipItem, me._chart));\n                });\n                model.title = me.getTitle(tooltipItems, data);\n                model.beforeBody = me.getBeforeBody(tooltipItems, data);\n                model.body = me.getBody(tooltipItems, data);\n                model.afterBody = me.getAfterBody(tooltipItems, data);\n                model.footer = me.getFooter(tooltipItems, data);\n                model.x = tooltipPosition.x;\n                model.y = tooltipPosition.y;\n                model.caretPadding = opts.caretPadding;\n                model.labelColors = labelColors;\n                model.labelTextColors = labelTextColors;\n                model.dataPoints = tooltipItems;\n                tooltipSize = getTooltipSize(this, model);\n                alignment = determineAlignment(this, tooltipSize);\n                backgroundPoint = getBackgroundPoint(model, tooltipSize, alignment, me._chart);\n            } else {\n                model.opacity = 0;\n            }\n            model.xAlign = alignment.xAlign;\n            model.yAlign = alignment.yAlign;\n            model.x = backgroundPoint.x;\n            model.y = backgroundPoint.y;\n            model.width = tooltipSize.width;\n            model.height = tooltipSize.height;\n            model.caretX = tooltipPosition.x;\n            model.caretY = tooltipPosition.y;\n            me._model = model;\n            if (changed && opts.custom) {\n                opts.custom.call(me, model);\n            }\n            return me;\n        },\n        drawCaret: function (tooltipPoint, size) {\n            var ctx = this._chart.ctx;\n            var vm = this._view;\n            var caretPosition = this.getCaretPosition(tooltipPoint, size, vm);\n            ctx.lineTo(caretPosition.x1, caretPosition.y1);\n            ctx.lineTo(caretPosition.x2, caretPosition.y2);\n            ctx.lineTo(caretPosition.x3, caretPosition.y3);\n        },\n        getCaretPosition: function (tooltipPoint, size, vm) {\n            var x1, x2, x3, y1, y2, y3;\n            var caretSize = vm.caretSize;\n            var cornerRadius = vm.cornerRadius;\n            var xAlign = vm.xAlign;\n            var yAlign = vm.yAlign;\n            var ptX = tooltipPoint.x;\n            var ptY = tooltipPoint.y;\n            var width = size.width;\n            var height = size.height;\n            if (yAlign === 'center') {\n                y2 = ptY + height / 2;\n                if (xAlign === 'left') {\n                    x1 = ptX;\n                    x2 = x1 - caretSize;\n                    x3 = x1;\n                    y1 = y2 + caretSize;\n                    y3 = y2 - caretSize;\n                } else {\n                    x1 = ptX + width;\n                    x2 = x1 + caretSize;\n                    x3 = x1;\n                    y1 = y2 - caretSize;\n                    y3 = y2 + caretSize;\n                }\n            } else {\n                if (xAlign === 'left') {\n                    x2 = ptX + cornerRadius + caretSize;\n                    x1 = x2 - caretSize;\n                    x3 = x2 + caretSize;\n                } else if (xAlign === 'right') {\n                    x2 = ptX + width - cornerRadius - caretSize;\n                    x1 = x2 - caretSize;\n                    x3 = x2 + caretSize;\n                } else {\n                    x2 = vm.caretX;\n                    x1 = x2 - caretSize;\n                    x3 = x2 + caretSize;\n                }\n                if (yAlign === 'top') {\n                    y1 = ptY;\n                    y2 = y1 - caretSize;\n                    y3 = y1;\n                } else {\n                    y1 = ptY + height;\n                    y2 = y1 + caretSize;\n                    y3 = y1;\n                    var tmp = x3;\n                    x3 = x1;\n                    x1 = tmp;\n                }\n            }\n            return {\n                x1: x1,\n                x2: x2,\n                x3: x3,\n                y1: y1,\n                y2: y2,\n                y3: y3\n            };\n        },\n        drawTitle: function (pt, vm, ctx) {\n            var title = vm.title;\n            if (title.length) {\n                pt.x = getAlignedX(vm, vm._titleAlign);\n                ctx.textAlign = vm._titleAlign;\n                ctx.textBaseline = 'top';\n                var titleFontSize = vm.titleFontSize;\n                var titleSpacing = vm.titleSpacing;\n                ctx.fillStyle = vm.titleFontColor;\n                ctx.font = helpers.fontString(titleFontSize, vm._titleFontStyle, vm._titleFontFamily);\n                var i, len;\n                for (i = 0, len = title.length; i < len; ++i) {\n                    ctx.fillText(title[i], pt.x, pt.y);\n                    pt.y += titleFontSize + titleSpacing;\n                    if (i + 1 === title.length) {\n                        pt.y += vm.titleMarginBottom - titleSpacing;\n                    }\n                }\n            }\n        },\n        drawBody: function (pt, vm, ctx) {\n            var bodyFontSize = vm.bodyFontSize;\n            var bodySpacing = vm.bodySpacing;\n            var bodyAlign = vm._bodyAlign;\n            var body = vm.body;\n            var drawColorBoxes = vm.displayColors;\n            var labelColors = vm.labelColors;\n            var xLinePadding = 0;\n            var colorX = drawColorBoxes ? getAlignedX(vm, 'left') : 0;\n            var textColor;\n            ctx.textAlign = bodyAlign;\n            ctx.textBaseline = 'top';\n            ctx.font = helpers.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\n            pt.x = getAlignedX(vm, bodyAlign);\n            var fillLineOfText = function (line) {\n                ctx.fillText(line, pt.x + xLinePadding, pt.y);\n                pt.y += bodyFontSize + bodySpacing;\n            };\n            ctx.fillStyle = vm.bodyFontColor;\n            helpers.each(vm.beforeBody, fillLineOfText);\n            xLinePadding = drawColorBoxes && bodyAlign !== 'right' ? bodyAlign === 'center' ? bodyFontSize / 2 + 1 : bodyFontSize + 2 : 0;\n            helpers.each(body, function (bodyItem, i) {\n                textColor = vm.labelTextColors[i];\n                ctx.fillStyle = textColor;\n                helpers.each(bodyItem.before, fillLineOfText);\n                helpers.each(bodyItem.lines, function (line) {\n                    if (drawColorBoxes) {\n                        ctx.fillStyle = vm.legendColorBackground;\n                        ctx.fillRect(colorX, pt.y, bodyFontSize, bodyFontSize);\n                        ctx.lineWidth = 1;\n                        ctx.strokeStyle = labelColors[i].borderColor;\n                        ctx.strokeRect(colorX, pt.y, bodyFontSize, bodyFontSize);\n                        ctx.fillStyle = labelColors[i].backgroundColor;\n                        ctx.fillRect(colorX + 1, pt.y + 1, bodyFontSize - 2, bodyFontSize - 2);\n                        ctx.fillStyle = textColor;\n                    }\n                    fillLineOfText(line);\n                });\n                helpers.each(bodyItem.after, fillLineOfText);\n            });\n            xLinePadding = 0;\n            helpers.each(vm.afterBody, fillLineOfText);\n            pt.y -= bodySpacing;\n        },\n        drawFooter: function (pt, vm, ctx) {\n            var footer = vm.footer;\n            if (footer.length) {\n                pt.x = getAlignedX(vm, vm._footerAlign);\n                pt.y += vm.footerMarginTop;\n                ctx.textAlign = vm._footerAlign;\n                ctx.textBaseline = 'top';\n                ctx.fillStyle = vm.footerFontColor;\n                ctx.font = helpers.fontString(vm.footerFontSize, vm._footerFontStyle, vm._footerFontFamily);\n                helpers.each(footer, function (line) {\n                    ctx.fillText(line, pt.x, pt.y);\n                    pt.y += vm.footerFontSize + vm.footerSpacing;\n                });\n            }\n        },\n        drawBackground: function (pt, vm, ctx, tooltipSize) {\n            ctx.fillStyle = vm.backgroundColor;\n            ctx.strokeStyle = vm.borderColor;\n            ctx.lineWidth = vm.borderWidth;\n            var xAlign = vm.xAlign;\n            var yAlign = vm.yAlign;\n            var x = pt.x;\n            var y = pt.y;\n            var width = tooltipSize.width;\n            var height = tooltipSize.height;\n            var radius = vm.cornerRadius;\n            ctx.beginPath();\n            ctx.moveTo(x + radius, y);\n            if (yAlign === 'top') {\n                this.drawCaret(pt, tooltipSize);\n            }\n            ctx.lineTo(x + width - radius, y);\n            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n            if (yAlign === 'center' && xAlign === 'right') {\n                this.drawCaret(pt, tooltipSize);\n            }\n            ctx.lineTo(x + width, y + height - radius);\n            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n            if (yAlign === 'bottom') {\n                this.drawCaret(pt, tooltipSize);\n            }\n            ctx.lineTo(x + radius, y + height);\n            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n            if (yAlign === 'center' && xAlign === 'left') {\n                this.drawCaret(pt, tooltipSize);\n            }\n            ctx.lineTo(x, y + radius);\n            ctx.quadraticCurveTo(x, y, x + radius, y);\n            ctx.closePath();\n            ctx.fill();\n            if (vm.borderWidth > 0) {\n                ctx.stroke();\n            }\n        },\n        draw: function () {\n            var ctx = this._chart.ctx;\n            var vm = this._view;\n            if (vm.opacity === 0) {\n                return;\n            }\n            var tooltipSize = {\n                width: vm.width,\n                height: vm.height\n            };\n            var pt = {\n                x: vm.x,\n                y: vm.y\n            };\n            var opacity = Math.abs(vm.opacity < 0.001) ? 0 : vm.opacity;\n            var hasTooltipContent = vm.title.length || vm.beforeBody.length || vm.body.length || vm.afterBody.length || vm.footer.length;\n            if (this._options.enabled && hasTooltipContent) {\n                ctx.save();\n                ctx.globalAlpha = opacity;\n                this.drawBackground(pt, vm, ctx, tooltipSize);\n                pt.y += vm.yPadding;\n                this.drawTitle(pt, vm, ctx);\n                this.drawBody(pt, vm, ctx);\n                this.drawFooter(pt, vm, ctx);\n                ctx.restore();\n            }\n        },\n        handleEvent: function (e) {\n            var me = this;\n            var options = me._options;\n            var changed = false;\n            me._lastActive = me._lastActive || [];\n            if (e.type === 'mouseout') {\n                me._active = [];\n            } else {\n                me._active = me._chart.getElementsAtEventForMode(e, options.mode, options);\n            }\n            changed = !helpers.arrayEquals(me._active, me._lastActive);\n            if (changed) {\n                me._lastActive = me._active;\n                if (options.enabled || options.custom) {\n                    me._eventPosition = {\n                        x: e.x,\n                        y: e.y\n                    };\n                    me.update(true);\n                    me.pivot();\n                }\n            }\n            return changed;\n        }\n    });\n    exports.positioners = positioners;\n    module.exports = exports;\n    function __isEmptyObject(obj) {\n        var attr;\n        for (attr in obj)\n            return !1;\n        return !0;\n    }\n    function __isValidToReturn(obj) {\n        return typeof obj != 'object' || Array.isArray(obj) || !__isEmptyObject(obj);\n    }\n    if (__isValidToReturn(module.exports))\n        return module.exports;\n    else if (__isValidToReturn(exports))\n        return exports;\n});"]}