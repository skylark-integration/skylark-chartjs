{"version":3,"sources":["core/core.plugins.js"],"names":["define","__module__0","__module__1","exports","module","defaults","helpers","__isValidToReturn","obj","Array","isArray","attr","__isEmptyObject","_set","plugins","_plugins","_cacheId","register","p","this","concat","forEach","plugin","indexOf","push","unregister","idx","splice","clear","count","length","getAll","notify","chart","hook","args","i","descriptor","params","method","descriptors","ilen","options","apply","cache","$plugins","id","config","opts","clone","global","_invalidate"],"mappings":";;;;;;;AAAAA,QACI,kBACA,oBACD,SAAUC,EAAaC,GACtB,aACA,IAAIC,KACAC,GAAWD,YACXE,EAAWJ,EACXK,EAAUJ,EA8Fd,SAASK,EAAkBC,GACvB,MAAqB,iBAAPA,GAAmBC,MAAMC,QAAQF,KAPnD,SAAyBA,GACrB,IAAIG,EACJ,IAAKA,KAAQH,EACT,OAAO,EACX,OAAO,EAGiDI,CAAgBJ,GAE5E,OAhGAH,EAASQ,KAAK,UAAYC,aAC1BV,EAAOD,SACHY,YACAC,SAAU,EACVC,SAAU,SAAUH,GAChB,IAAII,EAAIC,KAAKJ,YACVK,OAAON,GAASO,QAAQ,SAAUC,IACN,IAAvBJ,EAAEK,QAAQD,IACVJ,EAAEM,KAAKF,KAGfH,KAAKH,YAETS,WAAY,SAAUX,GAClB,IAAII,EAAIC,KAAKJ,YACVK,OAAON,GAASO,QAAQ,SAAUC,GACjC,IAAII,EAAMR,EAAEK,QAAQD,IACP,IAATI,GACAR,EAAES,OAAOD,EAAK,KAGtBP,KAAKH,YAETY,MAAO,WACHT,KAAKJ,YACLI,KAAKH,YAETa,MAAO,WACH,OAAOV,KAAKJ,SAASe,QAEzBC,OAAQ,WACJ,OAAOZ,KAAKJ,UAEhBiB,OAAQ,SAAUC,EAAOC,EAAMC,GAC3B,IAEIC,EAAGC,EAAYf,EAAQgB,EAAQC,EAF/BC,EAAcrB,KAAKqB,YAAYP,GAC/BQ,EAAOD,EAAYV,OAEvB,IAAKM,EAAI,EAAGA,EAAIK,IAAQL,EAIpB,GAAsB,mBADtBG,GADAjB,GADAe,EAAaG,EAAYJ,IACLd,QACJY,OAEZI,GAAUL,GAAOb,OAAOe,QACjBX,KAAKa,EAAWK,UACc,IAAjCH,EAAOI,MAAMrB,EAAQgB,IACrB,OAAO,EAInB,OAAO,GAEXE,YAAa,SAAUP,GACnB,IAAIW,EAAQX,EAAMY,WAAaZ,EAAMY,aACrC,GAAID,EAAME,KAAO3B,KAAKH,SAClB,OAAO4B,EAAMJ,YAEjB,IAAI1B,KACA0B,KACAO,EAASd,GAASA,EAAMc,WACxBL,EAAUK,EAAOL,SAAWK,EAAOL,QAAQ5B,YAsB/C,OArBAK,KAAKJ,SAASK,OAAO2B,EAAOjC,aAAeO,QAAQ,SAAUC,GAEzD,IAAa,IADHR,EAAQS,QAAQD,GAC1B,CAGA,IAAIwB,EAAKxB,EAAOwB,GACZE,EAAON,EAAQI,IACN,IAATE,KAGS,IAATA,IACAA,EAAO1C,EAAQ2C,MAAM5C,EAAS6C,OAAOpC,QAAQgC,KAEjDhC,EAAQU,KAAKF,GACbkB,EAAYhB,MACRF,OAAQA,EACRoB,QAASM,YAGjBJ,EAAMJ,YAAcA,EACpBI,EAAME,GAAK3B,KAAKH,SACTwB,GAEXW,YAAa,SAAUlB,UACZA,EAAMY,WAYjBtC,EAAkBH,EAAOD,SAClBC,EAAOD,QACTI,EAAkBJ,GAChBA,OADN","file":"../../core/core.plugins.js","sourcesContent":["define([\n    './core.defaults',\n    '../helpers/index'\n], function (__module__0, __module__1) {\n    'use strict';\n    var exports = {};\n    var module = { exports: {} };\n    var defaults = __module__0;\n    var helpers = __module__1;\n    defaults._set('global', { plugins: {} });\n    module.exports = {\n        _plugins: [],\n        _cacheId: 0,\n        register: function (plugins) {\n            var p = this._plugins;\n            [].concat(plugins).forEach(function (plugin) {\n                if (p.indexOf(plugin) === -1) {\n                    p.push(plugin);\n                }\n            });\n            this._cacheId++;\n        },\n        unregister: function (plugins) {\n            var p = this._plugins;\n            [].concat(plugins).forEach(function (plugin) {\n                var idx = p.indexOf(plugin);\n                if (idx !== -1) {\n                    p.splice(idx, 1);\n                }\n            });\n            this._cacheId++;\n        },\n        clear: function () {\n            this._plugins = [];\n            this._cacheId++;\n        },\n        count: function () {\n            return this._plugins.length;\n        },\n        getAll: function () {\n            return this._plugins;\n        },\n        notify: function (chart, hook, args) {\n            var descriptors = this.descriptors(chart);\n            var ilen = descriptors.length;\n            var i, descriptor, plugin, params, method;\n            for (i = 0; i < ilen; ++i) {\n                descriptor = descriptors[i];\n                plugin = descriptor.plugin;\n                method = plugin[hook];\n                if (typeof method === 'function') {\n                    params = [chart].concat(args || []);\n                    params.push(descriptor.options);\n                    if (method.apply(plugin, params) === false) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        },\n        descriptors: function (chart) {\n            var cache = chart.$plugins || (chart.$plugins = {});\n            if (cache.id === this._cacheId) {\n                return cache.descriptors;\n            }\n            var plugins = [];\n            var descriptors = [];\n            var config = chart && chart.config || {};\n            var options = config.options && config.options.plugins || {};\n            this._plugins.concat(config.plugins || []).forEach(function (plugin) {\n                var idx = plugins.indexOf(plugin);\n                if (idx !== -1) {\n                    return;\n                }\n                var id = plugin.id;\n                var opts = options[id];\n                if (opts === false) {\n                    return;\n                }\n                if (opts === true) {\n                    opts = helpers.clone(defaults.global.plugins[id]);\n                }\n                plugins.push(plugin);\n                descriptors.push({\n                    plugin: plugin,\n                    options: opts || {}\n                });\n            });\n            cache.descriptors = descriptors;\n            cache.id = this._cacheId;\n            return descriptors;\n        },\n        _invalidate: function (chart) {\n            delete chart.$plugins;\n        }\n    };\n    function __isEmptyObject(obj) {\n        var attr;\n        for (attr in obj)\n            return !1;\n        return !0;\n    }\n    function __isValidToReturn(obj) {\n        return typeof obj != 'object' || Array.isArray(obj) || !__isEmptyObject(obj);\n    }\n    if (__isValidToReturn(module.exports))\n        return module.exports;\n    else if (__isValidToReturn(exports))\n        return exports;\n});"]}