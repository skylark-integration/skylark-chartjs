{"version":3,"sources":["core/core.controller.js"],"names":["define","__module__0","__module__1","__module__2","__module__3","__module__4","__module__5","__module__6","__module__7","__module__8","__module__9","__module__10","exports","module","Animation","animations","controllers","defaults","helpers","Interaction","layouts","platform","plugins","scaleService","Tooltip","valueOrDefault","mergeScaleConfig","merge","slice","call","arguments","merger","key","target","source","options","i","type","scale","slen","length","push","getScaleDefaults","_merger","mergeConfig","tval","sval","positionIsHorizontal","position","_set","elements","events","hover","onHover","mode","intersect","animationDuration","onClick","maintainAspectRatio","responsive","responsiveAnimationDuration","Chart","item","config","this","construct","__isValidToReturn","obj","Array","isArray","attr","__isEmptyObject","extend","prototype","me","data","datasets","labels","global","initConfig","context","acquireContext","canvas","height","width","id","uid","ctx","aspectRatio","_bufferedRender","chart","controller","instances","Object","defineProperty","get","set","value","initialize","update","console","error","notify","retinaScale","devicePixelRatio","bindEvents","resize","ensureScalesHaveIDs","buildOrUpdateScales","initToolTip","clear","stop","cancelAnimation","silent","newWidth","Math","max","floor","getMaximumWidth","newHeight","getMaximumHeight","style","newSize","onResize","duration","scalesOptions","scales","scaleOptions","each","xAxes","xAxisOptions","index","yAxes","yAxisOptions","items","updated","keys","reduce","concat","map","dtype","dposition","isDefault","scaleType","scaleClass","getScaleConstructor","mergeTicksOptions","hasUpdated","addScalesToLayout","buildOrUpdateControllers","newControllers","dataset","datasetIndex","meta","getDatasetMeta","destroyDatasetMeta","updateIndex","linkScales","ControllerClass","undefined","Error","resetElements","reset","tooltip","newOptions","lazy","removeBox","_options","tooltips","_invalidate","_data","buildOrUpdateElements","updateLayout","animation","updateDatasets","lastActive","_bufferedRequest","easing","render","ilen","updateDataset","args","animationOptions","onComplete","callback","numSteps","animationObject","easingFunction","effects","currentStep","stepDecimal","draw","onAnimationProgress","onProgress","onAnimationComplete","addAnimation","easingValue","isNullOrUndef","transition","boxes","box","chartArea","drawDatasets","_drawTooltip","isDatasetVisible","drawDataset","getElementAtEvent","e","modes","single","getElementsAtEvent","label","getElementsAtXAxis","getElementsAtEventForMode","method","getDatasetAtEvent","_meta","hidden","xAxisID","yAxisID","getVisibleDatasetCount","count","generateLegend","legendCallback","destroy","unbindEvents","releaseContext","toBase64Image","toDataURL","apply","_chart","_chartInstance","listeners","_listeners","listener","eventHandler","addEventListener","removeEventListener","updateHoverStyle","enabled","element","_datasetIndex","changed","handleEvent","_start","bufferedRequest","animating","hoverOptions","active","native","arrayEquals","Controller","types","configMerge","scaleMerge"],"mappings":"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","file":"../../core/core.controller.js","sourcesContent":["define([\n    './core.animation',\n    './core.animations',\n    '../controllers/index',\n    './core.defaults',\n    '../helpers/index',\n    './core.interaction',\n    './core.layouts',\n    '../platforms/platform',\n    './core.plugins',\n    '../core/core.scaleService',\n    './core.tooltip'\n], function (__module__0, __module__1, __module__2, __module__3, __module__4, __module__5, __module__6, __module__7, __module__8, __module__9, __module__10) {\n    'use strict';\n    var exports = {};\n    var module = { exports: {} };\n    var Animation = __module__0;\n    var animations = __module__1;\n    var controllers = __module__2;\n    var defaults = __module__3;\n    var helpers = __module__4;\n    var Interaction = __module__5;\n    var layouts = __module__6;\n    var platform = __module__7;\n    var plugins = __module__8;\n    var scaleService = __module__9;\n    var Tooltip = __module__10;\n    var valueOrDefault = helpers.valueOrDefault;\n    defaults._set('global', {\n        elements: {},\n        events: [\n            'mousemove',\n            'mouseout',\n            'click',\n            'touchstart',\n            'touchmove'\n        ],\n        hover: {\n            onHover: null,\n            mode: 'nearest',\n            intersect: true,\n            animationDuration: 400\n        },\n        onClick: null,\n        maintainAspectRatio: true,\n        responsive: true,\n        responsiveAnimationDuration: 0\n    });\n    function mergeScaleConfig() {\n        return helpers.merge({}, [].slice.call(arguments), {\n            merger: function (key, target, source, options) {\n                if (key === 'xAxes' || key === 'yAxes') {\n                    var slen = source[key].length;\n                    var i, type, scale;\n                    if (!target[key]) {\n                        target[key] = [];\n                    }\n                    for (i = 0; i < slen; ++i) {\n                        scale = source[key][i];\n                        type = valueOrDefault(scale.type, key === 'xAxes' ? 'category' : 'linear');\n                        if (i >= target[key].length) {\n                            target[key].push({});\n                        }\n                        if (!target[key][i].type || scale.type && scale.type !== target[key][i].type) {\n                            helpers.merge(target[key][i], [\n                                scaleService.getScaleDefaults(type),\n                                scale\n                            ]);\n                        } else {\n                            helpers.merge(target[key][i], scale);\n                        }\n                    }\n                } else {\n                    helpers._merger(key, target, source, options);\n                }\n            }\n        });\n    }\n    function mergeConfig() {\n        return helpers.merge({}, [].slice.call(arguments), {\n            merger: function (key, target, source, options) {\n                var tval = target[key] || {};\n                var sval = source[key];\n                if (key === 'scales') {\n                    target[key] = mergeScaleConfig(tval, sval);\n                } else if (key === 'scale') {\n                    target[key] = helpers.merge(tval, [\n                        scaleService.getScaleDefaults(sval.type),\n                        sval\n                    ]);\n                } else {\n                    helpers._merger(key, target, source, options);\n                }\n            }\n        });\n    }\n    function initConfig(config) {\n        config = config || {};\n        var data = config.data = config.data || {};\n        data.datasets = data.datasets || [];\n        data.labels = data.labels || [];\n        config.options = mergeConfig(defaults.global, defaults[config.type], config.options || {});\n        return config;\n    }\n    function updateConfig(chart) {\n        var newOptions = chart.options;\n        helpers.each(chart.scales, function (scale) {\n            layouts.removeBox(chart, scale);\n        });\n        newOptions = mergeConfig(defaults.global, defaults[chart.config.type], newOptions);\n        chart.options = chart.config.options = newOptions;\n        chart.ensureScalesHaveIDs();\n        chart.buildOrUpdateScales();\n        chart.tooltip._options = newOptions.tooltips;\n        chart.tooltip.initialize();\n    }\n    function positionIsHorizontal(position) {\n        return position === 'top' || position === 'bottom';\n    }\n    var Chart = function (item, config) {\n        this.construct(item, config);\n        return this;\n    };\n    helpers.extend(Chart.prototype, {\n        construct: function (item, config) {\n            var me = this;\n            config = initConfig(config);\n            var context = platform.acquireContext(item, config);\n            var canvas = context && context.canvas;\n            var height = canvas && canvas.height;\n            var width = canvas && canvas.width;\n            me.id = helpers.uid();\n            me.ctx = context;\n            me.canvas = canvas;\n            me.config = config;\n            me.width = width;\n            me.height = height;\n            me.aspectRatio = height ? width / height : null;\n            me.options = config.options;\n            me._bufferedRender = false;\n            me.chart = me;\n            me.controller = me;\n            Chart.instances[me.id] = me;\n            Object.defineProperty(me, 'data', {\n                get: function () {\n                    return me.config.data;\n                },\n                set: function (value) {\n                    me.config.data = value;\n                }\n            });\n            if (!context || !canvas) {\n                console.error(\"Failed to create chart: can't acquire context from the given item\");\n                return;\n            }\n            me.initialize();\n            me.update();\n        },\n        initialize: function () {\n            var me = this;\n            plugins.notify(me, 'beforeInit');\n            helpers.retinaScale(me, me.options.devicePixelRatio);\n            me.bindEvents();\n            if (me.options.responsive) {\n                me.resize(true);\n            }\n            me.ensureScalesHaveIDs();\n            me.buildOrUpdateScales();\n            me.initToolTip();\n            plugins.notify(me, 'afterInit');\n            return me;\n        },\n        clear: function () {\n            helpers.canvas.clear(this);\n            return this;\n        },\n        stop: function () {\n            animations.cancelAnimation(this);\n            return this;\n        },\n        resize: function (silent) {\n            var me = this;\n            var options = me.options;\n            var canvas = me.canvas;\n            var aspectRatio = options.maintainAspectRatio && me.aspectRatio || null;\n            var newWidth = Math.max(0, Math.floor(helpers.getMaximumWidth(canvas)));\n            var newHeight = Math.max(0, Math.floor(aspectRatio ? newWidth / aspectRatio : helpers.getMaximumHeight(canvas)));\n            if (me.width === newWidth && me.height === newHeight) {\n                return;\n            }\n            canvas.width = me.width = newWidth;\n            canvas.height = me.height = newHeight;\n            canvas.style.width = newWidth + 'px';\n            canvas.style.height = newHeight + 'px';\n            helpers.retinaScale(me, options.devicePixelRatio);\n            if (!silent) {\n                var newSize = {\n                    width: newWidth,\n                    height: newHeight\n                };\n                plugins.notify(me, 'resize', [newSize]);\n                if (options.onResize) {\n                    options.onResize(me, newSize);\n                }\n                me.stop();\n                me.update({ duration: options.responsiveAnimationDuration });\n            }\n        },\n        ensureScalesHaveIDs: function () {\n            var options = this.options;\n            var scalesOptions = options.scales || {};\n            var scaleOptions = options.scale;\n            helpers.each(scalesOptions.xAxes, function (xAxisOptions, index) {\n                xAxisOptions.id = xAxisOptions.id || 'x-axis-' + index;\n            });\n            helpers.each(scalesOptions.yAxes, function (yAxisOptions, index) {\n                yAxisOptions.id = yAxisOptions.id || 'y-axis-' + index;\n            });\n            if (scaleOptions) {\n                scaleOptions.id = scaleOptions.id || 'scale';\n            }\n        },\n        buildOrUpdateScales: function () {\n            var me = this;\n            var options = me.options;\n            var scales = me.scales || {};\n            var items = [];\n            var updated = Object.keys(scales).reduce(function (obj, id) {\n                obj[id] = false;\n                return obj;\n            }, {});\n            if (options.scales) {\n                items = items.concat((options.scales.xAxes || []).map(function (xAxisOptions) {\n                    return {\n                        options: xAxisOptions,\n                        dtype: 'category',\n                        dposition: 'bottom'\n                    };\n                }), (options.scales.yAxes || []).map(function (yAxisOptions) {\n                    return {\n                        options: yAxisOptions,\n                        dtype: 'linear',\n                        dposition: 'left'\n                    };\n                }));\n            }\n            if (options.scale) {\n                items.push({\n                    options: options.scale,\n                    dtype: 'radialLinear',\n                    isDefault: true,\n                    dposition: 'chartArea'\n                });\n            }\n            helpers.each(items, function (item) {\n                var scaleOptions = item.options;\n                var id = scaleOptions.id;\n                var scaleType = valueOrDefault(scaleOptions.type, item.dtype);\n                if (positionIsHorizontal(scaleOptions.position) !== positionIsHorizontal(item.dposition)) {\n                    scaleOptions.position = item.dposition;\n                }\n                updated[id] = true;\n                var scale = null;\n                if (id in scales && scales[id].type === scaleType) {\n                    scale = scales[id];\n                    scale.options = scaleOptions;\n                    scale.ctx = me.ctx;\n                    scale.chart = me;\n                } else {\n                    var scaleClass = scaleService.getScaleConstructor(scaleType);\n                    if (!scaleClass) {\n                        return;\n                    }\n                    scale = new scaleClass({\n                        id: id,\n                        type: scaleType,\n                        options: scaleOptions,\n                        ctx: me.ctx,\n                        chart: me\n                    });\n                    scales[scale.id] = scale;\n                }\n                scale.mergeTicksOptions();\n                if (item.isDefault) {\n                    me.scale = scale;\n                }\n            });\n            helpers.each(updated, function (hasUpdated, id) {\n                if (!hasUpdated) {\n                    delete scales[id];\n                }\n            });\n            me.scales = scales;\n            scaleService.addScalesToLayout(this);\n        },\n        buildOrUpdateControllers: function () {\n            var me = this;\n            var newControllers = [];\n            helpers.each(me.data.datasets, function (dataset, datasetIndex) {\n                var meta = me.getDatasetMeta(datasetIndex);\n                var type = dataset.type || me.config.type;\n                if (meta.type && meta.type !== type) {\n                    me.destroyDatasetMeta(datasetIndex);\n                    meta = me.getDatasetMeta(datasetIndex);\n                }\n                meta.type = type;\n                if (meta.controller) {\n                    meta.controller.updateIndex(datasetIndex);\n                    meta.controller.linkScales();\n                } else {\n                    var ControllerClass = controllers[meta.type];\n                    if (ControllerClass === undefined) {\n                        throw new Error('\"' + meta.type + '\" is not a chart type.');\n                    }\n                    meta.controller = new ControllerClass(me, datasetIndex);\n                    newControllers.push(meta.controller);\n                }\n            }, me);\n            return newControllers;\n        },\n        resetElements: function () {\n            var me = this;\n            helpers.each(me.data.datasets, function (dataset, datasetIndex) {\n                me.getDatasetMeta(datasetIndex).controller.reset();\n            }, me);\n        },\n        reset: function () {\n            this.resetElements();\n            this.tooltip.initialize();\n        },\n        update: function (config) {\n            var me = this;\n            if (!config || typeof config !== 'object') {\n                config = {\n                    duration: config,\n                    lazy: arguments[1]\n                };\n            }\n            updateConfig(me);\n            plugins._invalidate(me);\n            if (plugins.notify(me, 'beforeUpdate') === false) {\n                return;\n            }\n            me.tooltip._data = me.data;\n            var newControllers = me.buildOrUpdateControllers();\n            helpers.each(me.data.datasets, function (dataset, datasetIndex) {\n                me.getDatasetMeta(datasetIndex).controller.buildOrUpdateElements();\n            }, me);\n            me.updateLayout();\n            if (me.options.animation && me.options.animation.duration) {\n                helpers.each(newControllers, function (controller) {\n                    controller.reset();\n                });\n            }\n            me.updateDatasets();\n            me.tooltip.initialize();\n            me.lastActive = [];\n            plugins.notify(me, 'afterUpdate');\n            if (me._bufferedRender) {\n                me._bufferedRequest = {\n                    duration: config.duration,\n                    easing: config.easing,\n                    lazy: config.lazy\n                };\n            } else {\n                me.render(config);\n            }\n        },\n        updateLayout: function () {\n            var me = this;\n            if (plugins.notify(me, 'beforeLayout') === false) {\n                return;\n            }\n            layouts.update(this, this.width, this.height);\n            plugins.notify(me, 'afterScaleUpdate');\n            plugins.notify(me, 'afterLayout');\n        },\n        updateDatasets: function () {\n            var me = this;\n            if (plugins.notify(me, 'beforeDatasetsUpdate') === false) {\n                return;\n            }\n            for (var i = 0, ilen = me.data.datasets.length; i < ilen; ++i) {\n                me.updateDataset(i);\n            }\n            plugins.notify(me, 'afterDatasetsUpdate');\n        },\n        updateDataset: function (index) {\n            var me = this;\n            var meta = me.getDatasetMeta(index);\n            var args = {\n                meta: meta,\n                index: index\n            };\n            if (plugins.notify(me, 'beforeDatasetUpdate', [args]) === false) {\n                return;\n            }\n            meta.controller.update();\n            plugins.notify(me, 'afterDatasetUpdate', [args]);\n        },\n        render: function (config) {\n            var me = this;\n            if (!config || typeof config !== 'object') {\n                config = {\n                    duration: config,\n                    lazy: arguments[1]\n                };\n            }\n            var animationOptions = me.options.animation;\n            var duration = valueOrDefault(config.duration, animationOptions && animationOptions.duration);\n            var lazy = config.lazy;\n            if (plugins.notify(me, 'beforeRender') === false) {\n                return;\n            }\n            var onComplete = function (animation) {\n                plugins.notify(me, 'afterRender');\n                helpers.callback(animationOptions && animationOptions.onComplete, [animation], me);\n            };\n            if (animationOptions && duration) {\n                var animation = new Animation({\n                    numSteps: duration / 16.66,\n                    easing: config.easing || animationOptions.easing,\n                    render: function (chart, animationObject) {\n                        var easingFunction = helpers.easing.effects[animationObject.easing];\n                        var currentStep = animationObject.currentStep;\n                        var stepDecimal = currentStep / animationObject.numSteps;\n                        chart.draw(easingFunction(stepDecimal), stepDecimal, currentStep);\n                    },\n                    onAnimationProgress: animationOptions.onProgress,\n                    onAnimationComplete: onComplete\n                });\n                animations.addAnimation(me, animation, duration, lazy);\n            } else {\n                me.draw();\n                onComplete(new Animation({\n                    numSteps: 0,\n                    chart: me\n                }));\n            }\n            return me;\n        },\n        draw: function (easingValue) {\n            var me = this;\n            me.clear();\n            if (helpers.isNullOrUndef(easingValue)) {\n                easingValue = 1;\n            }\n            me.transition(easingValue);\n            if (me.width <= 0 || me.height <= 0) {\n                return;\n            }\n            if (plugins.notify(me, 'beforeDraw', [easingValue]) === false) {\n                return;\n            }\n            helpers.each(me.boxes, function (box) {\n                box.draw(me.chartArea);\n            }, me);\n            me.drawDatasets(easingValue);\n            me._drawTooltip(easingValue);\n            plugins.notify(me, 'afterDraw', [easingValue]);\n        },\n        transition: function (easingValue) {\n            var me = this;\n            for (var i = 0, ilen = (me.data.datasets || []).length; i < ilen; ++i) {\n                if (me.isDatasetVisible(i)) {\n                    me.getDatasetMeta(i).controller.transition(easingValue);\n                }\n            }\n            me.tooltip.transition(easingValue);\n        },\n        drawDatasets: function (easingValue) {\n            var me = this;\n            if (plugins.notify(me, 'beforeDatasetsDraw', [easingValue]) === false) {\n                return;\n            }\n            for (var i = (me.data.datasets || []).length - 1; i >= 0; --i) {\n                if (me.isDatasetVisible(i)) {\n                    me.drawDataset(i, easingValue);\n                }\n            }\n            plugins.notify(me, 'afterDatasetsDraw', [easingValue]);\n        },\n        drawDataset: function (index, easingValue) {\n            var me = this;\n            var meta = me.getDatasetMeta(index);\n            var args = {\n                meta: meta,\n                index: index,\n                easingValue: easingValue\n            };\n            if (plugins.notify(me, 'beforeDatasetDraw', [args]) === false) {\n                return;\n            }\n            meta.controller.draw(easingValue);\n            plugins.notify(me, 'afterDatasetDraw', [args]);\n        },\n        _drawTooltip: function (easingValue) {\n            var me = this;\n            var tooltip = me.tooltip;\n            var args = {\n                tooltip: tooltip,\n                easingValue: easingValue\n            };\n            if (plugins.notify(me, 'beforeTooltipDraw', [args]) === false) {\n                return;\n            }\n            tooltip.draw();\n            plugins.notify(me, 'afterTooltipDraw', [args]);\n        },\n        getElementAtEvent: function (e) {\n            return Interaction.modes.single(this, e);\n        },\n        getElementsAtEvent: function (e) {\n            return Interaction.modes.label(this, e, { intersect: true });\n        },\n        getElementsAtXAxis: function (e) {\n            return Interaction.modes['x-axis'](this, e, { intersect: true });\n        },\n        getElementsAtEventForMode: function (e, mode, options) {\n            var method = Interaction.modes[mode];\n            if (typeof method === 'function') {\n                return method(this, e, options);\n            }\n            return [];\n        },\n        getDatasetAtEvent: function (e) {\n            return Interaction.modes.dataset(this, e, { intersect: true });\n        },\n        getDatasetMeta: function (datasetIndex) {\n            var me = this;\n            var dataset = me.data.datasets[datasetIndex];\n            if (!dataset._meta) {\n                dataset._meta = {};\n            }\n            var meta = dataset._meta[me.id];\n            if (!meta) {\n                meta = dataset._meta[me.id] = {\n                    type: null,\n                    data: [],\n                    dataset: null,\n                    controller: null,\n                    hidden: null,\n                    xAxisID: null,\n                    yAxisID: null\n                };\n            }\n            return meta;\n        },\n        getVisibleDatasetCount: function () {\n            var count = 0;\n            for (var i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n                if (this.isDatasetVisible(i)) {\n                    count++;\n                }\n            }\n            return count;\n        },\n        isDatasetVisible: function (datasetIndex) {\n            var meta = this.getDatasetMeta(datasetIndex);\n            return typeof meta.hidden === 'boolean' ? !meta.hidden : !this.data.datasets[datasetIndex].hidden;\n        },\n        generateLegend: function () {\n            return this.options.legendCallback(this);\n        },\n        destroyDatasetMeta: function (datasetIndex) {\n            var id = this.id;\n            var dataset = this.data.datasets[datasetIndex];\n            var meta = dataset._meta && dataset._meta[id];\n            if (meta) {\n                meta.controller.destroy();\n                delete dataset._meta[id];\n            }\n        },\n        destroy: function () {\n            var me = this;\n            var canvas = me.canvas;\n            var i, ilen;\n            me.stop();\n            for (i = 0, ilen = me.data.datasets.length; i < ilen; ++i) {\n                me.destroyDatasetMeta(i);\n            }\n            if (canvas) {\n                me.unbindEvents();\n                helpers.canvas.clear(me);\n                platform.releaseContext(me.ctx);\n                me.canvas = null;\n                me.ctx = null;\n            }\n            plugins.notify(me, 'destroy');\n            delete Chart.instances[me.id];\n        },\n        toBase64Image: function () {\n            return this.canvas.toDataURL.apply(this.canvas, arguments);\n        },\n        initToolTip: function () {\n            var me = this;\n            me.tooltip = new Tooltip({\n                _chart: me,\n                _chartInstance: me,\n                _data: me.data,\n                _options: me.options.tooltips\n            }, me);\n        },\n        bindEvents: function () {\n            var me = this;\n            var listeners = me._listeners = {};\n            var listener = function () {\n                me.eventHandler.apply(me, arguments);\n            };\n            helpers.each(me.options.events, function (type) {\n                platform.addEventListener(me, type, listener);\n                listeners[type] = listener;\n            });\n            if (me.options.responsive) {\n                listener = function () {\n                    me.resize();\n                };\n                platform.addEventListener(me, 'resize', listener);\n                listeners.resize = listener;\n            }\n        },\n        unbindEvents: function () {\n            var me = this;\n            var listeners = me._listeners;\n            if (!listeners) {\n                return;\n            }\n            delete me._listeners;\n            helpers.each(listeners, function (listener, type) {\n                platform.removeEventListener(me, type, listener);\n            });\n        },\n        updateHoverStyle: function (elements, mode, enabled) {\n            var method = enabled ? 'setHoverStyle' : 'removeHoverStyle';\n            var element, i, ilen;\n            for (i = 0, ilen = elements.length; i < ilen; ++i) {\n                element = elements[i];\n                if (element) {\n                    this.getDatasetMeta(element._datasetIndex).controller[method](element);\n                }\n            }\n        },\n        eventHandler: function (e) {\n            var me = this;\n            var tooltip = me.tooltip;\n            if (plugins.notify(me, 'beforeEvent', [e]) === false) {\n                return;\n            }\n            me._bufferedRender = true;\n            me._bufferedRequest = null;\n            var changed = me.handleEvent(e);\n            if (tooltip) {\n                changed = tooltip._start ? tooltip.handleEvent(e) : changed | tooltip.handleEvent(e);\n            }\n            plugins.notify(me, 'afterEvent', [e]);\n            var bufferedRequest = me._bufferedRequest;\n            if (bufferedRequest) {\n                me.render(bufferedRequest);\n            } else if (changed && !me.animating) {\n                me.stop();\n                me.render({\n                    duration: me.options.hover.animationDuration,\n                    lazy: true\n                });\n            }\n            me._bufferedRender = false;\n            me._bufferedRequest = null;\n            return me;\n        },\n        handleEvent: function (e) {\n            var me = this;\n            var options = me.options || {};\n            var hoverOptions = options.hover;\n            var changed = false;\n            me.lastActive = me.lastActive || [];\n            if (e.type === 'mouseout') {\n                me.active = [];\n            } else {\n                me.active = me.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions);\n            }\n            helpers.callback(options.onHover || options.hover.onHover, [\n                e.native,\n                me.active\n            ], me);\n            if (e.type === 'mouseup' || e.type === 'click') {\n                if (options.onClick) {\n                    options.onClick.call(me, e.native, me.active);\n                }\n            }\n            if (me.lastActive.length) {\n                me.updateHoverStyle(me.lastActive, hoverOptions.mode, false);\n            }\n            if (me.active.length && hoverOptions.mode) {\n                me.updateHoverStyle(me.active, hoverOptions.mode, true);\n            }\n            changed = !helpers.arrayEquals(me.active, me.lastActive);\n            me.lastActive = me.active;\n            return changed;\n        }\n    });\n    Chart.instances = {};\n    module.exports = Chart;\n    Chart.Controller = Chart;\n    Chart.types = {};\n    helpers.configMerge = mergeConfig;\n    helpers.scaleMerge = mergeScaleConfig;\n    function __isEmptyObject(obj) {\n        var attr;\n        for (attr in obj)\n            return !1;\n        return !0;\n    }\n    function __isValidToReturn(obj) {\n        return typeof obj != 'object' || Array.isArray(obj) || !__isEmptyObject(obj);\n    }\n    if (__isValidToReturn(module.exports))\n        return module.exports;\n    else if (__isValidToReturn(exports))\n        return exports;\n});"]}